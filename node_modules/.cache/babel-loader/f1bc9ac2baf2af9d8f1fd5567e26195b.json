{"remainingRequest":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\workCode\\xiaoE\\大圣系统源码\\admin\\src\\util\\order.js","dependencies":[{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\src\\util\\order.js","mtime":1677133950000},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\babel.config.js","mtime":1666766764000},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678778409044},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1678778390429},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\eslint-loader\\index.js","mtime":1678778406019}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.parse-float\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.parse-int\";\nimport \"core-js/modules/es6.regexp.split\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/**\n * 订单页面的各种计算和状态\n */\n\nimport { calculateBuyoutMoney, checkNumber, floatObj, toFixed } from \"../constant/goods/constant\";\nimport { DateAdd } from \"./date\";\nvar buyoutStatus = [\"未申请\", \"已申请\", \"已驳回\", \"买断通过\", \"待结算\", \"待支付\", \"成功\"];\nvar returnStatus = [\"未申请\", \"已申请\", \"已驳回\", \"待发货\", \"待收货\", \"待结算\", \"拒收\", \"待支付\", \"成功\"];\n\n/**\n * 解析审核状态\n * @param val\n * @returns {string}\n */\nexport var examines = function examines(examine) {\n  //test3_1_1,test3_2_1\n  if (!examine) {\n    return \"\";\n  }\n  var examines = {};\n  var str = examine.split(\",\");\n  var _iterator = _createForOfIteratorHelper(str),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var item = _step.value;\n      var datas = item.split(\"_\");\n      if (datas.length == 3) {\n        examines[datas[1]] = {\n          \"userName\": datas[0],\n          \"status\": datas[2] == 1 ? \"未审核\" : datas[2] == 2 ? \"审核通过\" : \"审核驳回\"\n        };\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return examines;\n};\n\n/**\n * 列表上的到期买断价\n * @param order\n * @returns {string|*|number}\n */\nexport var calculateOrderBuyoutMoney = function calculateOrderBuyoutMoney(order) {\n  var totalPricesRate = toFixed(parseFloat(order.totalPricesRate), 2);\n  var websitePrice = toFixed(parseFloat(order.websitePrice), 2);\n  var rentMoney = toFixed(parseFloat(order.rentMoney), 2);\n  var allMoney = floatObj.multiply(totalPricesRate, websitePrice);\n  return floatObj.subtract(allMoney, rentMoney);\n};\nexport var checkThreeAddress = function checkThreeAddress(order) {\n  if (!order.province || order.province.length < 1 || order.idCardAddress.indexOf(order.province) == -1) {\n    return false;\n  }\n  if (!order.province || order.province.length < 1 || order.sendUserAddress.indexOf(order.province) == -1) {\n    return false;\n  }\n  if (!order.city || order.city.length < 1 || order.idCardAddress.indexOf(order.city) == -1) {\n    return false;\n  }\n  if (!order.city || order.city.length < 1 || order.sendUserAddress.indexOf(order.city) == -1) {\n    return false;\n  }\n  if (!order.district || order.district.length < 1 || order.idCardAddress.indexOf(order.district) == -1) {\n    return false;\n  }\n  if (!order.district || order.district.length < 1 || order.sendUserAddress.indexOf(order.district) == -1) {\n    return false;\n  }\n  return true;\n};\nexport var checkBuyoutStatus = function checkBuyoutStatus(order) {\n  var statusBuyout = order.statusBuyout;\n  return buyoutStatus[statusBuyout - 1];\n};\nexport var checkReturnStatus = function checkReturnStatus(order) {\n  var statusReturn = order.statusReturn;\n  return returnStatus[Number.parseInt(statusReturn) - 1];\n};\n\n/**\n * 获取租期单位，月，日\n * @param val\n * @returns {string}\n */\nexport var buyoutBalancePayment = function buyoutBalancePayment(val) {\n  var obj = JSON.parse(val);\n  var packageName = obj.packageName;\n  return packageName.buyoutBalancePayment && Number.parseInt(packageName.buyoutBalancePayment) >= 0 ? packageName.buyoutBalancePayment : 0;\n};\n\n/**\n * 获取二次押金\n * @param val\n * @returns {string}\n */\nexport var secondDeposit = function secondDeposit(val) {\n  var _iterator2 = _createForOfIteratorHelper(val),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var bill = _step2.value;\n      if (Number.parseInt(bill.type) == 3) {\n        return bill.money;\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  return 0;\n};\n\n/**\n * 获取规格尺寸 空格拼接\n * @param val\n * @returns {string}\n */\nexport var combinationTitle = function combinationTitle(val) {\n  if (!val) return \"\";\n  var obj = JSON.parse(val);\n  var title = \"\";\n  for (var valKey in obj) {\n    if (valKey.startsWith(\"specification\")) {\n      title = title + \" \" + obj[valKey].name;\n    }\n  }\n  return title;\n};\n\n/**\n * 获取方案名称\n * @param val\n * @returns {string}\n */\nexport var packageName = function packageName(val) {\n  if (!val) return \"\";\n  var obj = JSON.parse(val);\n  if (obj.packageName) return obj.packageName.name;\n  return \"\";\n};\n\n/**\n * 获取当前套餐的期数\n * @param startTime 合同开始时间\n * @param endTime 合同结束时间\n * @param rentNumber 租期，几期\n * @param type 租期单位 2 月 1 日\n * @returns {string}\n */\nexport var indexNumber = function indexNumber(order, bills) {\n  var index = 0;\n  var last = 0;\n  if (order.leaseType == 2 && bills) {\n    var _iterator3 = _createForOfIteratorHelper(bills),\n      _step3;\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var bill = _step3.value;\n        if (bill.type != 5) {\n          continue;\n        }\n        var start = new Date(bill.startTime); //字符串转化成时间\n        var end = new Date(bill.endTime); //字符串转化成时间\n        var now = new Date().getTime();\n        if (start.getTime() < now && now <= end.getTime()) {\n          index = Number.parseInt(bill.orderNumber);\n        }\n        if (last < Number.parseInt(bill.orderNumber)) {\n          last = Number.parseInt(bill.orderNumber);\n        }\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n    if (index == 0) {\n      index = last;\n    }\n  }\n  return index;\n};\n\n/**\n * 买断总价\n * @param val\n * @returns {string}\n */\nexport var buyoutPrice = function buyoutPrice(val, totalPricesRate) {\n  if (!val) return \"\";\n  var obj = JSON.parse(val);\n  return obj.websitePrice * totalPricesRate;\n};\n\n/**\n * 判断成色\n */\nexport var secondHandTitle = function secondHandTitle(val) {\n  if (val == 100) return \"全新\";\n  return val / 10 + \"成新\";\n};\n\n/**\n * 获取租期单位，月，日\n * @param val\n * @returns {string}\n */\nexport var leaseTypeTitle = function leaseTypeTitle(val) {\n  if (val == 2) return \"月\";\n  return \"日\";\n};\n\n/**\n *  买断价的公式：\n 3个月之内的买断价 系数都是 1.25\n 3个月之后的买断价：\n 增长幅度公式： A = （总价系数 - 1.255）/ 3\n 第4个月系数：1.25 + A\n 第5个月系数：1.25 + A * 2\n 第6个月系数：1.25 + A * 3\n 后面6到12个月买断  都和第6个月一样\n */\n\nexport var calcBuyoutMoney = function calcBuyoutMoney(order, bills) {\n  //先判断是第几期\n  var index = indexNumber(order, bills);\n  console.log(\"index\", index, bills);\n  var last = 0;\n  var _iterator4 = _createForOfIteratorHelper(bills),\n    _step4;\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var bill = _step4.value;\n      //如果选中了后面几期，那么index要跟着变\n      if (bill.type != 5) {\n        continue;\n      }\n      if (bill.hasPay && last < Number.parseInt(bill.orderNumber)) {\n        last = Number.parseInt(bill.orderNumber);\n      }\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n  console.log(\"last\", index);\n  if (last > index) {\n    index = last;\n  }\n  var lease = 12;\n  var miniRate = 1.25;\n  var nowRate = 1.25;\n  var maxRate = toFixed(Number.parseFloat(order.totalPricesRate), 2);\n  var lease_type = order.lease_type;\n  var websitePrice = toFixed(Number.parseFloat(order.websitePrice), 2);\n  var rentMoney = 0;\n  var number = index <= 3 ? 3 : index;\n  var _iterator5 = _createForOfIteratorHelper(bills),\n    _step5;\n  try {\n    for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n      var _bill = _step5.value;\n      if (Number.parseInt(_bill.type) != 5 || Number.parseInt(_bill.orderNumber) > number) {\n        continue;\n      }\n      rentMoney = toFixed(floatObj.add(rentMoney, _bill.money), 2);\n      console.log(\"第\" + _bill.orderNumber + \"期\", _bill.money, rentMoney);\n    }\n  } catch (err) {\n    _iterator5.e(err);\n  } finally {\n    _iterator5.f();\n  }\n  console.log(\"计算租期\", index, lease);\n  if (index < lease) {\n    //说明没到期就停止了\n    if (index <= 3) {\n      //3期以内，官网价*1.25 - 3个月租金\n      return floatObj.subtract(floatObj.multiply(websitePrice, miniRate), rentMoney);\n    } else if (index <= 6 && index > 3) {\n      var betweenRate = floatObj.subtract(maxRate, miniRate);\n      var increase = toFixed(floatObj.divide(betweenRate, 3), 2); //增幅\n      nowRate = toFixed(floatObj.add(nowRate, floatObj.multiply(increase, index - 3)), 2);\n      var buyout = toFixed(floatObj.subtract(floatObj.multiply(nowRate, websitePrice), rentMoney), 2);\n      console.log(\"买断尾款\", nowRate, websitePrice, floatObj.multiply(nowRate, websitePrice), rentMoney);\n      return buyout;\n      // var betweenRate = floatObj.subtract(maxRate,miniRate);\n      // var betweenLease = Number.parseInt(lease) - 3;\n      // var increase = toFixed(floatObj.divide(betweenRate,betweenLease),2);//增幅\n      // nowRate = toFixed(floatObj.add(nowRate,floatObj.multiply(increase,index-3)),2)\n      // var buyout = floatObj.subtract(floatObj.multiply(nowRate,websitePrice),rentMoney);\n      // console.log(\"买断尾款\",nowRate,buyout)\n      // //计算已收租金\n      // return buyout;\n    } else {\n      nowRate = toFixed(maxRate, 2);\n      console.log(\"买断尾款\", floatObj.multiply(nowRate, websitePrice), rentMoney);\n      var buyout = toFixed(floatObj.subtract(floatObj.multiply(nowRate, websitePrice), rentMoney), 2);\n      return buyout;\n    }\n  }\n  /**\n   * 到期了，并且满足了\n   */\n  if (index == lease) {\n    var allmoney = floatObj.multiply(maxRate, websitePrice);\n    var buyoutBalancePayment = order.goodsCombinationJson.buyoutBalancePayment;\n    buyoutBalancePayment = buyoutBalancePayment < 0 ? 0 : buyoutBalancePayment;\n    console.log(\"买断尾款\", maxRate, allmoney, rentMoney, buyoutBalancePayment);\n    return floatObj.subtract(allmoney, rentMoney);\n  }\n};\n\n/**\n * 编辑订单计算买断价\n */\n\nexport var calcUpdateOrderBuyoutMoney = function calcUpdateOrderBuyoutMoney(order, bills, index) {\n  //先判断是第几期\n  var lease = 12;\n  var miniRate = 1.25;\n  var nowRate = 1.25;\n  var maxRate = toFixed(Number.parseFloat(order.totalPricesRate), 2);\n  var websitePrice = toFixed(Number.parseFloat(order.websitePrice), 2);\n  var rentMoney = 0;\n  var number = index <= 3 ? 3 : index;\n  var _iterator6 = _createForOfIteratorHelper(bills),\n    _step6;\n  try {\n    for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n      var bill = _step6.value;\n      if (Number.parseInt(bill.type) != 5 || Number.parseInt(bill.orderNumber) > number) {\n        continue;\n      }\n      rentMoney = toFixed(floatObj.add(rentMoney, bill.money), 2);\n      console.log(\"第\" + bill.orderNumber + \"期\", bill.money, rentMoney);\n    }\n  } catch (err) {\n    _iterator6.e(err);\n  } finally {\n    _iterator6.f();\n  }\n  console.log(\"计算租期\", index, lease);\n  if (index < lease) {\n    //说明没到期就停止了\n    if (index <= 3) {\n      //3期以内，官网价*1.25 - 3个月租金\n      return floatObj.subtract(floatObj.multiply(websitePrice, miniRate), rentMoney);\n    } else if (index <= 6 && index > 3) {\n      var betweenRate = floatObj.subtract(maxRate, miniRate);\n      var increase = toFixed(floatObj.divide(betweenRate, 3), 2); //增幅\n      nowRate = toFixed(floatObj.add(nowRate, floatObj.multiply(increase, index - 3)), 2);\n      var buyout = toFixed(floatObj.subtract(floatObj.multiply(nowRate, websitePrice), rentMoney), 2);\n      console.log(\"买断尾款\", nowRate, websitePrice, floatObj.multiply(nowRate, websitePrice), rentMoney);\n      return buyout;\n      // var betweenRate = floatObj.subtract(maxRate,miniRate);\n      // var betweenLease = Number.parseInt(lease) - 3;\n      // var increase = toFixed(floatObj.divide(betweenRate,betweenLease),2);//增幅\n      // nowRate = toFixed(floatObj.add(nowRate,floatObj.multiply(increase,index-3)),2)\n      // var buyout = floatObj.subtract(floatObj.multiply(nowRate,websitePrice),rentMoney);\n      // console.log(\"买断尾款\",nowRate,buyout)\n      // //计算已收租金\n      // return buyout;\n    } else {\n      nowRate = toFixed(maxRate, 2);\n      console.log(\"买断尾款\", nowRate, websitePrice, floatObj.multiply(nowRate, websitePrice), rentMoney);\n      var buyout = toFixed(floatObj.subtract(floatObj.multiply(nowRate, websitePrice), rentMoney), 2);\n      return buyout;\n    }\n  }\n  /**\n   * 到期了，并且满足了\n   */\n  if (index == lease) {\n    var allmoney = floatObj.multiply(maxRate, websitePrice);\n    var buyoutBalancePayment = order.goodsCombinationJson.buyoutBalancePayment;\n    buyoutBalancePayment = buyoutBalancePayment < 0 ? 0 : buyoutBalancePayment;\n    console.log(\"买断尾款\", maxRate, websitePrice, allmoney, rentMoney, buyoutBalancePayment);\n    return floatObj.subtract(allmoney, rentMoney);\n  }\n};",{"version":3,"names":["calculateBuyoutMoney","checkNumber","floatObj","toFixed","DateAdd","buyoutStatus","returnStatus","examines","examine","str","split","_iterator","_createForOfIteratorHelper","_step","s","n","done","item","value","datas","length","err","e","f","calculateOrderBuyoutMoney","order","totalPricesRate","parseFloat","websitePrice","rentMoney","allMoney","multiply","subtract","checkThreeAddress","province","idCardAddress","indexOf","sendUserAddress","city","district","checkBuyoutStatus","statusBuyout","checkReturnStatus","statusReturn","Number","parseInt","buyoutBalancePayment","val","obj","JSON","parse","packageName","secondDeposit","_iterator2","_step2","bill","type","money","combinationTitle","title","valKey","startsWith","name","indexNumber","bills","index","last","leaseType","_iterator3","_step3","start","Date","startTime","end","endTime","now","getTime","orderNumber","buyoutPrice","secondHandTitle","leaseTypeTitle","calcBuyoutMoney","console","log","_iterator4","_step4","hasPay","lease","miniRate","nowRate","maxRate","lease_type","number","_iterator5","_step5","add","betweenRate","increase","divide","buyout","allmoney","goodsCombinationJson","calcUpdateOrderBuyoutMoney","_iterator6","_step6"],"sources":["D:/workCode/xiaoE/大圣系统源码/admin/src/util/order.js"],"sourcesContent":["/**\n * 订单页面的各种计算和状态\n */\n\nimport {calculateBuyoutMoney, checkNumber, floatObj, toFixed} from \"../constant/goods/constant\";\nimport {DateAdd} from \"./date\";\n\nconst buyoutStatus = [\"未申请\",\"已申请\",\"已驳回\",\"买断通过\",\"待结算\",\"待支付\",\"成功\"]\nconst returnStatus = [\"未申请\",\"已申请\",\"已驳回\",\"待发货\",\"待收货\",\"待结算\",\"拒收\",\"待支付\",\"成功\"]\n\n\n/**\n * 解析审核状态\n * @param val\n * @returns {string}\n */\nexport const examines = (examine) => {\n  //test3_1_1,test3_2_1\n  if (!examine){\n    return \"\";\n  }\n  var examines = {};\n  var str = examine.split(\",\");\n  for (const item of str) {\n    const  datas = item.split(\"_\");\n    if (datas.length == 3){\n      examines[datas[1]]={\n        \"userName\":datas[0],\n        \"status\":datas[2] == 1?\"未审核\":(datas[2]==2?\"审核通过\":\"审核驳回\")\n      }\n    }\n  }\n  return examines\n}\n\n/**\n * 列表上的到期买断价\n * @param order\n * @returns {string|*|number}\n */\nexport const calculateOrderBuyoutMoney = (order) => {\n  var totalPricesRate = toFixed(parseFloat(order.totalPricesRate),2);\n  var websitePrice = toFixed(parseFloat(order.websitePrice),2);\n  var rentMoney = toFixed(parseFloat(order.rentMoney),2);\n  var allMoney = floatObj.multiply(totalPricesRate,websitePrice)\n  return floatObj.subtract(allMoney,rentMoney);\n}\n\nexport const checkThreeAddress = (order) => {\n\n  if (!order.province||order.province.length<1||order.idCardAddress.indexOf(order.province)==-1){\n    return false;\n  }\n  if (!order.province||order.province.length<1||order.sendUserAddress.indexOf(order.province)==-1){\n    return false;\n  }\n\n  if (!order.city||order.city.length<1||order.idCardAddress.indexOf(order.city)==-1){\n    return false;\n  }\n  if (!order.city||order.city.length<1||order.sendUserAddress.indexOf(order.city)==-1){\n    return false;\n  }\n\n  if (!order.district||order.district.length<1||order.idCardAddress.indexOf(order.district)==-1){\n    return false;\n  }\n  if (!order.district||order.district.length<1||order.sendUserAddress.indexOf(order.district)==-1){\n    return false;\n  }\n\n\n\n  return true\n}\n\nexport const checkBuyoutStatus = (order) => {\n   var statusBuyout = order.statusBuyout\n  return buyoutStatus[statusBuyout-1]\n}\nexport const checkReturnStatus = (order) => {\n  var statusReturn = order.statusReturn\n  return returnStatus[Number.parseInt(statusReturn)-1]\n}\n\n\n/**\n * 获取租期单位，月，日\n * @param val\n * @returns {string}\n */\nexport const buyoutBalancePayment = (val) => {\n  const obj = JSON.parse(val);\n  var packageName  = obj.packageName;\n  return packageName.buyoutBalancePayment&&Number.parseInt(packageName.buyoutBalancePayment)>=0?packageName.buyoutBalancePayment:0;\n}\n\n/**\n * 获取二次押金\n * @param val\n * @returns {string}\n */\nexport const secondDeposit = (val) => {\n  for (const bill of val) {\n    if (Number.parseInt(bill.type) == 3){\n      return bill.money\n    }\n  }\n  return 0;\n}\n\n\n/**\n * 获取规格尺寸 空格拼接\n * @param val\n * @returns {string}\n */\nexport const combinationTitle = (val) => {\n  if (!val)\n    return \"\";\n  const obj = JSON.parse(val);\n  let title = \"\";\n  for (const valKey in obj) {\n    if (valKey.startsWith(\"specification\")){\n      title = title +\" \"+ obj[valKey].name\n    }\n  }\n  return title\n}\n\n/**\n * 获取方案名称\n * @param val\n * @returns {string}\n */\nexport const packageName = (val) => {\n  if (!val)\n    return \"\";\n  const obj = JSON.parse(val);\n  if (obj.packageName)\n    return obj.packageName.name\n  return \"\"\n}\n\n/**\n * 获取当前套餐的期数\n * @param startTime 合同开始时间\n * @param endTime 合同结束时间\n * @param rentNumber 租期，几期\n * @param type 租期单位 2 月 1 日\n * @returns {string}\n */\nexport const indexNumber = (order,bills) => {\n  var index = 0;\n  var last = 0;\n  if (order.leaseType == 2 && bills){\n    for (const bill of bills) {\n      if (bill.type != 5){\n        continue;\n      }\n      var start = new Date(bill.startTime);  //字符串转化成时间\n      var end = new Date(bill.endTime);  //字符串转化成时间\n      var now = new Date().getTime();\n      if (start.getTime()<now&&now<=end.getTime()){\n        index = Number.parseInt(bill.orderNumber);\n      }\n      if (last < Number.parseInt(bill.orderNumber)){\n        last = Number.parseInt(bill.orderNumber);\n      }\n    }\n    if (index == 0){\n      index = last\n    }\n  }\n  return index\n}\n\n/**\n * 买断总价\n * @param val\n * @returns {string}\n */\nexport const buyoutPrice = (val,totalPricesRate) => {\n  if (!val)\n    return \"\";\n  const obj = JSON.parse(val);\n  return obj.websitePrice*totalPricesRate\n}\n\n/**\n * 判断成色\n */\nexport const secondHandTitle = (val) => {\n  if (val == 100)\n    return \"全新\"\n  return val/10+\"成新\";\n}\n\n/**\n * 获取租期单位，月，日\n * @param val\n * @returns {string}\n */\nexport const leaseTypeTitle = (val) => {\n  if (val == 2)\n    return \"月\"\n  return \"日\";\n}\n\n/**\n *  买断价的公式：\n 3个月之内的买断价 系数都是 1.25\n 3个月之后的买断价：\n 增长幅度公式： A = （总价系数 - 1.255）/ 3\n 第4个月系数：1.25 + A\n 第5个月系数：1.25 + A * 2\n 第6个月系数：1.25 + A * 3\n 后面6到12个月买断  都和第6个月一样\n */\n\nexport const calcBuyoutMoney = (order,bills)=>{\n  //先判断是第几期\n  var index = indexNumber(order,bills);\n  console.log(\"index\",index,bills)\n  var last = 0;\n  for (const bill of bills) {//如果选中了后面几期，那么index要跟着变\n    if (bill.type != 5){\n      continue;\n    }\n    if (bill.hasPay&&last < Number.parseInt(bill.orderNumber)){\n      last = Number.parseInt(bill.orderNumber);\n    }\n  }\n  console.log(\"last\",index)\n  if (last>index){\n    index = last;\n  }\n  var lease = 12;\n  var miniRate = 1.25;\n  var nowRate = 1.25;\n  var maxRate = toFixed(Number.parseFloat(order.totalPricesRate),2);\n  var lease_type = order.lease_type;\n  var websitePrice = toFixed(Number.parseFloat(order.websitePrice),2);\n  var rentMoney = 0;\n  var number = index<=3?3:index;\n  for (const bill of bills) {\n    if (Number.parseInt(bill.type)!=5||Number.parseInt(bill.orderNumber)>number){\n      continue;\n    }\n    rentMoney = toFixed(floatObj.add(rentMoney,bill.money),2);\n    console.log(\"第\"+bill.orderNumber+\"期\",bill.money,rentMoney)\n  }\n  console.log(\"计算租期\",index,lease)\n  if (index<lease){//说明没到期就停止了\n      if (index <= 3){ //3期以内，官网价*1.25 - 3个月租金\n        return floatObj.subtract(floatObj.multiply(websitePrice,miniRate),rentMoney)\n      }else if( index <= 6 && index > 3){\n        var betweenRate = floatObj.subtract(maxRate,miniRate);\n        var increase = toFixed(floatObj.divide(betweenRate,3),2);//增幅\n        nowRate = toFixed(floatObj.add(nowRate,floatObj.multiply(increase,index-3)),2)\n        var buyout = toFixed(floatObj.subtract(floatObj.multiply(nowRate,websitePrice),rentMoney),2);\n        console.log(\"买断尾款\",nowRate,websitePrice,floatObj.multiply(nowRate,websitePrice),rentMoney)\n        return buyout;\n        // var betweenRate = floatObj.subtract(maxRate,miniRate);\n        // var betweenLease = Number.parseInt(lease) - 3;\n        // var increase = toFixed(floatObj.divide(betweenRate,betweenLease),2);//增幅\n        // nowRate = toFixed(floatObj.add(nowRate,floatObj.multiply(increase,index-3)),2)\n        // var buyout = floatObj.subtract(floatObj.multiply(nowRate,websitePrice),rentMoney);\n        // console.log(\"买断尾款\",nowRate,buyout)\n        // //计算已收租金\n        // return buyout;\n      }else{\n        nowRate = toFixed(maxRate,2)\n        console.log(\"买断尾款\",floatObj.multiply(nowRate,websitePrice),rentMoney)\n        var buyout = toFixed(floatObj.subtract(floatObj.multiply(nowRate,websitePrice),rentMoney),2);\n        return buyout;\n      }\n  }\n  /**\n   * 到期了，并且满足了\n   */\n  if (index == lease){\n    var allmoney = floatObj.multiply(maxRate,websitePrice)\n    var buyoutBalancePayment = order.goodsCombinationJson.buyoutBalancePayment;\n    buyoutBalancePayment =buyoutBalancePayment<0?0:buyoutBalancePayment;\n    console.log(\"买断尾款\",maxRate,allmoney,rentMoney,buyoutBalancePayment)\n    return floatObj.subtract(allmoney,rentMoney)\n  }\n}\n\n/**\n * 编辑订单计算买断价\n */\n\nexport const calcUpdateOrderBuyoutMoney = (order,bills,index)=>{\n  //先判断是第几期\n  var lease = 12;\n  var miniRate = 1.25;\n  var nowRate = 1.25;\n  var maxRate = toFixed(Number.parseFloat(order.totalPricesRate),2);\n  var websitePrice = toFixed(Number.parseFloat(order.websitePrice),2);\n  var rentMoney = 0;\n  var number = index<=3?3:index;\n  for (const bill of bills) {\n    if (Number.parseInt(bill.type)!=5||Number.parseInt(bill.orderNumber)>number){\n      continue;\n    }\n    rentMoney = toFixed(floatObj.add(rentMoney,bill.money),2);\n    console.log(\"第\"+bill.orderNumber+\"期\",bill.money,rentMoney)\n  }\n  console.log(\"计算租期\",index,lease)\n  if (index<lease){//说明没到期就停止了\n    if (index <= 3){ //3期以内，官网价*1.25 - 3个月租金\n      return floatObj.subtract(floatObj.multiply(websitePrice,miniRate),rentMoney)\n    }else if( index <= 6 && index > 3){\n      var betweenRate = floatObj.subtract(maxRate,miniRate);\n      var increase = toFixed(floatObj.divide(betweenRate,3),2);//增幅\n      nowRate = toFixed(floatObj.add(nowRate,floatObj.multiply(increase,index-3)),2)\n      var buyout = toFixed(floatObj.subtract(floatObj.multiply(nowRate,websitePrice),rentMoney),2);\n      console.log(\"买断尾款\",nowRate,websitePrice,floatObj.multiply(nowRate,websitePrice),rentMoney)\n      return buyout;\n      // var betweenRate = floatObj.subtract(maxRate,miniRate);\n      // var betweenLease = Number.parseInt(lease) - 3;\n      // var increase = toFixed(floatObj.divide(betweenRate,betweenLease),2);//增幅\n      // nowRate = toFixed(floatObj.add(nowRate,floatObj.multiply(increase,index-3)),2)\n      // var buyout = floatObj.subtract(floatObj.multiply(nowRate,websitePrice),rentMoney);\n      // console.log(\"买断尾款\",nowRate,buyout)\n      // //计算已收租金\n      // return buyout;\n    }else{\n      nowRate = toFixed(maxRate,2)\n      console.log(\"买断尾款\",nowRate,websitePrice,floatObj.multiply(nowRate,websitePrice),rentMoney)\n      var buyout = toFixed(floatObj.subtract(floatObj.multiply(nowRate,websitePrice),rentMoney),2);\n      return buyout;\n    }\n  }\n  /**\n   * 到期了，并且满足了\n   */\n  if (index == lease){\n    var allmoney = floatObj.multiply(maxRate,websitePrice)\n    var buyoutBalancePayment = order.goodsCombinationJson.buyoutBalancePayment;\n    buyoutBalancePayment =buyoutBalancePayment<0?0:buyoutBalancePayment;\n    console.log(\"买断尾款\",maxRate,websitePrice,allmoney,rentMoney,buyoutBalancePayment)\n    return floatObj.subtract(allmoney,rentMoney)\n  }\n}\n"],"mappings":"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"}]}