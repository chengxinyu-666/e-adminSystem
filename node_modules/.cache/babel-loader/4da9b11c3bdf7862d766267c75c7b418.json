{"remainingRequest":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workCode\\xiaoE\\大圣系统源码\\admin\\src\\components\\order\\dialog_order_buyout.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\src\\components\\order\\dialog_order_buyout.vue","mtime":1676968324000},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\babel.config.js","mtime":1666766764000},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678778409044},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1678778390429},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678778409044},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1678778410194}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.parse-float\";\nimport _defineProperty from \"D:/workCode/xiaoE/\\u5927\\u5723\\u7CFB\\u7EDF\\u6E90\\u7801/admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.parse-int\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nimport { headers as _headers } from \"../../util/auth\";\nimport { leaseTypeTitle, buyoutBalancePayment, buyoutPrice, nperNumber, packageName, secondDeposit, indexNumber, calcBuyoutMoney } from \"../../util/order\";\nimport { calculateMoneyStats, floatObj, toFixed } from \"../../constant/goods/constant\";\nimport moment from \"moment\";\nimport vue from \"../../main\";\nimport { cancle, changeBt, settlement } from \"../../api/order/order\";\nimport ElImageViewer from \"element-ui/packages/image/src/image-viewer\";\nexport default {\n  name: 'dialog',\n  components: {\n    ElImageViewer: ElImageViewer\n  },\n  data: function data() {\n    return {\n      param: null,\n      order: null,\n      destroy: null,\n      isShow: false,\n      imageUrl: '',\n      dialogFormVisible: false,\n      imageslist: [],\n      onlineShow: false,\n      table_key: 0,\n      buyoutMoney: 0,\n      textarea: '',\n      offlineForm: {\n        payMoney: 0,\n        returnMoney: 0\n      },\n      isOfflineShow: false,\n      offline: {\n        submitBtn: false,\n        emptyBtn: false,\n        labelWidth: 160,\n        column: [{\n          label: '结算需支付金额',\n          prop: 'payMoney',\n          span: 24,\n          type: 'title'\n        }, {\n          label: '结算退还金额',\n          prop: 'returnMoney',\n          span: 24,\n          type: 'title'\n        }, {\n          label: '上传线下凭证',\n          prop: 'images',\n          type: 'upload',\n          span: 24,\n          listType: 'picture-card',\n          tip: '只能上传jpg/png文件，且不超过500kb',\n          propsHttp: {\n            home: vue.$store.state.common.cloudDomain,\n            res: \"data\",\n            url: 'name',\n            name: 'originalName'\n          },\n          action: '/api/blade-resource/oss/endpoint/put-file',\n          rules: [{\n            required: true,\n            message: \"请上传发货图片\",\n            trigger: \"blur\"\n          }]\n        }]\n      },\n      destroyLists: [],\n      orderBills: [],\n      allDue: 0,\n      //总欠款\n      allRent: 0,\n      //总租金\n      reduction: 0,\n      //减免\n      allDeposit: 0,\n      //总押金\n      paid: 0,\n      //已付\n      leaveDeposit: 0,\n      //剩余押金\n      totleMoney: 0,\n      //汇总\n      firstDeposit: 0,\n      //首次实付押金\n      hasPay: 0,\n      //需支付金额\n      destroyInfo: {\n        searchShow: false,\n        searchMenuSpan: 6,\n        tip: false,\n        border: true,\n        editBtn: false,\n        addBtn: false,\n        delBtn: false,\n        index: false,\n        viewBtn: false,\n        selection: false,\n        searchBtn: false,\n        filterBtn: false,\n        refreshBtn: false,\n        columnBtn: false,\n        menu: true,\n        headerAlign: 'center',\n        align: 'center',\n        column: [{\n          label: \"损坏部位\",\n          prop: \"where\",\n          search: true,\n          slot: true,\n          rules: [{\n            required: true,\n            message: \"请输入订单编号\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: \"问题说明\",\n          prop: \"info\",\n          search: true,\n          slot: true,\n          rules: [{\n            required: true,\n            message: \"请输入订单编号\",\n            trigger: \"blur\"\n          }]\n        }]\n      },\n      option: {\n        searchShow: false,\n        searchMenuSpan: 6,\n        tip: false,\n        border: true,\n        editBtn: false,\n        addBtn: false,\n        delBtn: false,\n        index: false,\n        viewBtn: false,\n        selection: false,\n        searchBtn: false,\n        filterBtn: false,\n        refreshBtn: false,\n        columnBtn: false,\n        menuWidth: 100,\n        menu: true,\n        headerAlign: 'center',\n        align: 'center',\n        column: [{\n          label: \"账单类型\",\n          prop: \"typeName\",\n          search: true,\n          slot: true,\n          rules: [{\n            required: true,\n            message: \"请输入订单编号\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: \"应付款日期\",\n          width: 120,\n          prop: \"startTime\"\n        }, {\n          label: \"账单金额\",\n          prop: \"money\",\n          slot: true,\n          rules: [{\n            required: true,\n            message: \"请输入商品ID\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: \"付款情况\",\n          prop: \"factPayMoney\",\n          slot: true,\n          width: 140,\n          rules: [{\n            required: true,\n            message: \"请输入商品ID\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: \"滞纳金\",\n          prop: \"allOverdueMoney\",\n          width: 140,\n          slot: true,\n          rules: [{\n            required: true,\n            message: \"请输入租期结束日\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: \"结余/欠款\",\n          width: 140,\n          prop: \"due\",\n          slot: true,\n          props: {\n            label: \"dictValue\",\n            value: \"dictKey\"\n          }\n        }]\n      }\n    };\n  },\n  watch: {\n    isShow: function isShow(val, oldVal) {\n      var _this = this;\n      if (!val) {\n        this.$nextTick(function () {\n          _this.end(true);\n        });\n      }\n    },\n    orderBills: {\n      handler: function handler(newVal, old) {\n        var _this2 = this;\n        this.$nextTick(function () {\n          _this2.getAllDue();\n        });\n      },\n      deep: true\n    }\n  },\n  created: function created() {},\n  activated: function activated() {},\n  mounted: function mounted() {\n    if (this.param.depositType) {\n      this.depositType = this.param.depositType;\n    } else {\n      this.depositType = 1;\n    }\n    console.log(\"depositType\", this.depositType);\n    if (this.param.destroyJson) {\n      this.destroy = JSON.parse(this.param.destroyJson);\n      console.log(this.destroy);\n    }\n    this.orderBills = [];\n    var index = this.getNperNumber();\n    console.log(\"=======\", index);\n    var _iterator = _createForOfIteratorHelper(this.param.bills),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var item = _step.value;\n        item.hasPay = true;\n        item.cancel = false;\n        if (item.status == 1) {\n          item.cancel = true;\n        }\n        if (item.type == 5 && Number.parseInt(item.orderNumber) <= 3) {\n          item.cancel = false;\n        } else if (item.type == 5 && Number.parseInt(item.orderNumber) > 3) {\n          item.hasPay = false;\n        }\n        this.orderBills.push(_objectSpread({}, item));\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    var buyout = {\n      money: this.buyoutMoney,\n      type: 10,\n      factPayMoney: 0,\n      reductionMoney: 0,\n      couponMoney: 0,\n      hasPay: true,\n      cancel: false,\n      depositMoney: 0,\n      typeName: \"买断价\",\n      startTime: moment().format('YYYY-MM-DD'),\n      endTime: moment().format('YYYY-MM-DD')\n    };\n    this.orderBills.push(buyout);\n    //计算买断尾款\n\n    // if (this.depositType==2&&this.hasPay<0){\n    //   data.needPay = Math.abs(this.hasPay)\n    // }else if (this.depositType==2&&this.hasPay>0){\n    //   data.needReturn = Math.abs(this.hasPay)\n    // }else if (this.depositType==1){\n    //   data.needPay = this.allDue>=0?this.allDue:0;\n    //   data.needReturn = this.leaveDeposit>=0?this.leaveDeposit:0;\n    // }\n\n    console.log(this.offlineForm);\n  },\n  methods: {\n    goodsInfo: function goodsInfo() {\n      vue.$router.push({\n        path: \"/goods/view/index\",\n        query: {\n          goodsId: this.param.goodsId\n        }\n      });\n      this.isShow = false;\n    },\n    getOrderNperNumber: function getOrderNperNumber(val) {\n      if (val.row.type == 5) {\n        return \"第\" + val.row.orderNumber + \"期租金\";\n      } else {\n        return val.label;\n      }\n    },\n    /**\n     * 总欠款\n     * @param val\n     * @returns {string|*}\n     */\n    getAllDue: function getAllDue() {\n      this.allDue = 0; //总欠款\n      this.allRent = 0; //总租金\n      this.reduction = 0; //减免\n      this.allDeposit = 0; //总押金\n      this.paid = 0; //已付\n      this.leaveDeposit = 0; //剩余押金\n      this.totleMoney = 0; //汇总\n      this.firstDeposit = 0; //首次实付押金\n      this.hasPay = 0; //需支付金额\n      var _iterator2 = _createForOfIteratorHelper(this.orderBills),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var bill = _step2.value;\n          if (bill.type == 2 && Number.parseFloat(bill.factPayMoney) > 0) {\n            //说明是首次押金，并且不是免押\n            this.firstDeposit = floatObj.add(this.firstDeposit, Number.parseFloat(bill.factPayMoney)); //\n            continue;\n          }\n          if (bill.type == 3 && Number.parseFloat(bill.factPayMoney) > 0) {\n            //说明是二次押金\n            this.allDeposit = floatObj.add(this.allDeposit, Number.parseFloat(bill.factPayMoney));\n            this.paid = floatObj.add(this.paid, Number.parseFloat(bill.factPayMoney));\n            continue;\n          }\n          var money = Number.parseFloat(bill.money) - (Number.parseFloat(bill.factPayMoney) + Number.parseFloat(bill.reductionMoney) + Number.parseFloat(bill.couponMoney) + Number.parseFloat(bill.depositMoney));\n          money = toFixed(money, 2);\n          if (bill.hasPay) {\n            this.allDue = floatObj.add(this.allDue, money);\n          }\n          this.paid = floatObj.add(this.paid, Number.parseFloat(bill.factPayMoney));\n          if (Number.parseFloat(bill.hasOverduePayMoney) > 0) {\n            this.paid = floatObj.add(this.paid, Number.parseFloat(bill.hasOverduePayMoney));\n          }\n          if (bill.type == 5) {\n            this.allRent = floatObj.add(this.allRent, Number.parseFloat(bill.money));\n          }\n          this.reduction = floatObj.add(this.reduction, Number.parseFloat(bill.reductionMoney));\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      if (this.firstDeposit > 0) {\n        this.leaveDeposit = floatObj.subtract(this.firstDeposit, this.paid);\n      } else {\n        this.leaveDeposit = this.allDeposit;\n      }\n      var le = 0;\n      if (this.firstDeposit > 0) {\n        le = floatObj.subtract(this.firstDeposit, this.paid);\n      } else {\n        le = this.allDeposit;\n      }\n      var all = toFixed(floatObj.subtract(le, this.allDue), 2);\n      this.totleMoney = all > 0 ? all + \"(结余)\" : all + \"(欠款)\";\n      this.hasPay = all;\n      if (this.depositType == 2) {\n        this.offlineForm.payMoney = 0;\n        if (this.hasPay < 0) {\n          this.offlineForm.payMoney = Math.abs(all);\n        }\n        if (this.hasPay > 0) {\n          this.offlineForm.returnMoney = this.hasPay;\n        }\n      }\n      if (this.depositType == 1) {\n        this.offlineForm.payMoney = this.allDue;\n        this.offlineForm.returnMoney = this.leaveDeposit;\n      }\n      this.buyoutMoney = calcBuyoutMoney(this.param, this.orderBills);\n      var _iterator3 = _createForOfIteratorHelper(this.orderBills),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _bill = _step3.value;\n          if (_bill.type == 10) {\n            _bill.money = this.buyoutMoney;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    },\n    getDue: function getDue(bill) {\n      var money = Number.parseFloat(bill.money) - (Number.parseFloat(bill.factPayMoney) + Number.parseFloat(bill.reductionMoney) + Number.parseFloat(bill.couponMoney) + Number.parseFloat(bill.depositMoney));\n      money = toFixed(money, 2);\n      if (money < 0) {\n        return \"结余\" + money;\n      } else if (money == 0) {\n        return \"结清\";\n      } else {\n        return \"欠款\" + money;\n      }\n    },\n    getLeaseTypeTitle: function getLeaseTypeTitle(val) {\n      var ss = leaseTypeTitle(val);\n      return ss;\n    },\n    getBuyoutPrice: function getBuyoutPrice(val) {\n      return buyoutPrice(val, this.param.totalPricesRate);\n    },\n    getPackageName: function getPackageName(val) {\n      return packageName(val);\n    },\n    getNperNumber: function getNperNumber() {\n      return indexNumber(this.param, this.param.bills);\n    },\n    getNowBuyoutMoney: function getNowBuyoutMoney() {\n      return this.getBuyoutPrice(this.param.goodsCombinationJson) - this.getNperNumber() * this.param.rentPerMoney;\n    },\n    getBuyoutBalancePayment: function getBuyoutBalancePayment() {\n      return buyoutBalancePayment(this.param.goodsCombinationJson);\n    },\n    getSecondDeposit: function getSecondDeposit() {\n      return secondDeposit(this.param.bills);\n    },\n    headers: function headers() {\n      return _headers();\n    },\n    closeFn: function closeFn() {},\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      this.imageUrl = URL.createObjectURL(file.raw);\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === 'image/jpeg';\n      var isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!');\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n      return isJPG && isLt2M;\n    },\n    submit: function submit(payType) {\n      var _this3 = this;\n      var data = {};\n      data.payType = payType;\n      data.orderId = this.param.id;\n      data.type = 2;\n      data.needPay = 0;\n      data.needReturn = 0;\n      data.depositType = this.depositType;\n      if (this.depositType == 2 && this.hasPay < 0) {\n        data.needPay = Math.abs(this.hasPay);\n      } else if (this.depositType == 2 && this.hasPay > 0) {\n        data.needReturn = Math.abs(this.hasPay);\n      } else if (this.depositType == 1) {\n        data.needPay = this.allDue >= 0 ? this.allDue : 0;\n        data.needReturn = this.leaveDeposit >= 0 ? this.leaveDeposit : 0;\n      }\n      data.leaveDeposit = this.leaveDeposit;\n      console.log(this.offlineForm.images);\n      if (payType == 1 && (!this.offlineForm.images || this.offlineForm.images.length == 0)) {\n        this.$message.error('请上传线下转账凭证');\n        return;\n      }\n      console.log(this.offlineForm.images);\n      if (this.offlineForm.images && this.offlineForm.images.length > 0) {\n        data.image = this.offlineForm.images.join(\",\");\n      }\n      data.bills = this.orderBills;\n      console.log(data);\n      settlement(data).then(function (res) {\n        vue.$message({\n          type: 'success',\n          message: '结算成功成功!'\n        });\n        _this3.isOfflineShow = false;\n        _this3.onlineShow = false;\n        _this3.isShow = false;\n        _this3.$nextTick(function () {\n          _this3.end(true);\n        });\n      }).catch(function (res) {\n        console.log(res);\n      });\n    }\n  }\n};",{"version":3,"names":["headers","leaseTypeTitle","buyoutBalancePayment","buyoutPrice","nperNumber","packageName","secondDeposit","indexNumber","calcBuyoutMoney","calculateMoneyStats","floatObj","toFixed","moment","vue","cancle","changeBt","settlement","ElImageViewer","name","components","data","param","order","destroy","isShow","imageUrl","dialogFormVisible","imageslist","onlineShow","table_key","buyoutMoney","textarea","offlineForm","payMoney","returnMoney","isOfflineShow","offline","submitBtn","emptyBtn","labelWidth","column","label","prop","span","type","listType","tip","propsHttp","home","$store","state","common","cloudDomain","res","url","action","rules","required","message","trigger","destroyLists","orderBills","allDue","allRent","reduction","allDeposit","paid","leaveDeposit","totleMoney","firstDeposit","hasPay","destroyInfo","searchShow","searchMenuSpan","border","editBtn","addBtn","delBtn","index","viewBtn","selection","searchBtn","filterBtn","refreshBtn","columnBtn","menu","headerAlign","align","search","slot","option","menuWidth","width","props","value","watch","val","oldVal","_this","$nextTick","end","handler","newVal","old","_this2","getAllDue","deep","created","activated","mounted","depositType","console","log","destroyJson","JSON","parse","getNperNumber","_iterator","_createForOfIteratorHelper","bills","_step","s","n","done","item","cancel","status","Number","parseInt","orderNumber","push","_objectSpread","err","e","f","buyout","money","factPayMoney","reductionMoney","couponMoney","depositMoney","typeName","startTime","format","endTime","methods","goodsInfo","$router","path","query","goodsId","getOrderNperNumber","row","_iterator2","_step2","bill","parseFloat","add","hasOverduePayMoney","subtract","le","all","Math","abs","_iterator3","_step3","getDue","getLeaseTypeTitle","ss","getBuyoutPrice","totalPricesRate","getPackageName","getNowBuyoutMoney","goodsCombinationJson","rentPerMoney","getBuyoutBalancePayment","getSecondDeposit","closeFn","handleAvatarSuccess","file","URL","createObjectURL","raw","beforeAvatarUpload","isJPG","isLt2M","size","$message","error","submit","payType","_this3","orderId","id","needPay","needReturn","images","length","image","join","then","catch"],"sources":["src/components/order/dialog_order_buyout.vue"],"sourcesContent":["<!--\n 订单修改\n -->\n<template>\n  <div>\n    <el-dialog\n      v-if=\"isShow\"\n      title=\"买断结算\"\n      :visible.sync=\"isShow\"\n      width=\"900px\"\n      @close=\"closeFn\"\n      append-to-body\n      style=\"text-align: left\">\n      <el-form ref=\"form1\" label-width=\"120px\" size=\"small\">\n        <div>\n          订单基本信息\n        </div>\n        <div style=\"border-radius: 5px;padding: 0px 5px;border: 1px solid #eeeeee;padding-top: 10px;padding-bottom: 10px;margin-top: 10px\">\n          <el-row>\n            <el-col :span=\"12\" style=\"display: flex;flex-direction: column\">\n              <el-form-item label=\"订单编号：\" class=\"bottom\">\n                <div style=\"display: flex\">\n                  <span >{{param.no}}</span>\n                  <span style=\"flex: 1\"></span>\n                </div>\n              </el-form-item>\n              <el-form-item label=\"租赁方案：\" class=\"bottom\">\n                {{getPackageName(param.goodsCombinationJson)}}\n              </el-form-item>\n              <el-form-item label=\"押金：\" class=\"bottom\">\n                {{param.amount}}({{param.freeType == 1?\"芝麻免押\":(param.freeType == 2?\"支付宝押金\":\"其他\")}})\n              </el-form-item>\n              <el-form-item label=\"商品官网价：\" class=\"bottom\">\n                {{ param.websitePrice }}\n              </el-form-item>\n              <el-form-item label=\"每期租金：\" class=\"bottom\">\n                {{ param.rentPerMoney }}(第一期{{param.rentFirstMoney}})(总租金{{ param.rentMoney }})\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-form-item label=\"租赁商品：\" class=\"bottom\">\n                <div style=\"display: flex\">\n                  <span >{{ param.goodsTitle }}</span>\n                  <span style=\"color: #169BD5\" @click=\"goodsInfo\">点击查看商品详情</span>\n                  <span style=\"flex: 1\"></span>\n                </div>\n              </el-form-item>\n              <el-form-item label=\"租期：\" class=\"bottom\">\n                {{param.lease}}个{{ getLeaseTypeTitle(param.leaseType) }}\n              </el-form-item>\n              <el-form-item label=\"二次押金：\" class=\"bottom\">\n                {{ getSecondDeposit() }}\n              </el-form-item>\n              <el-form-item label=\"买断价：\" class=\"bottom\">\n                当前买断价{{buyoutMoney}}(总合约价：{{getBuyoutPrice(param.goodsCombinationJson)}})\n              </el-form-item>\n              <el-form-item label=\"买断尾款：\" class=\"bottom\">\n                {{getBuyoutBalancePayment() }}\n              </el-form-item>\n            </el-col>\n          </el-row>\n        </div>\n        <div style=\"margin-top: 20px\">\n          订单支付记录\n        </div>\n        <avue-crud  :key=\"table_key\" ref=\"crud\" :option=\"option\" :data=\"orderBills\" style=\"margin-top: 10px\">\n          <template #menu=\"{row,index,size}\">\n            <div style=\"display: flex\">\n              <el-checkbox v-model=\"row.hasPay\" :disabled=\"!row.cancel\">需要支付</el-checkbox>\n            </div>\n          </template>\n          <template slot=\"typeName\" slot-scope=\"scope\">\n            <span>{{ getOrderNperNumber(scope) }}</span>\n          </template>\n          <template slot=\"due\" slot-scope=\"scope\">\n            <span>{{ getDue(scope.row) }}</span>\n          </template>\n          <template slot=\"factPayMoney\" slot-scope=\"scope\">\n              <span v-if=\"scope.row.factPayMoney\">\n                  实付({{scope.row.factPayMoney}})\n              </span>\n            <span v-if=\"scope.row.reductionMoney\">\n                  减免({{scope.row.reductionMoney}})\n              </span>\n            <span v-if=\"scope.row.couponMoney\">\n                  优惠({{scope.row.couponMoney}})\n              </span>\n            <span v-if=\"scope.row.depositMoney\">\n                  押金抵消({{scope.row.depositMoney}})\n              </span>\n            <span v-if=\"(Number.parseFloat(scope.row.factPayMoney)+Number.parseFloat(scope.row.reductionMoney)+Number.parseFloat(scope.row.couponMoney)+Number.parseFloat(scope.row.depositMoney)) === 0\">0</span>\n          </template>\n          <template slot=\"allOverdueMoney\" slot-scope=\"scope\">\n            <div v-if=\"scope.row.allOverdueMoney && Number.parseFloat(scope.row.allOverdueMoney)>0\">{{ scope.row.allOverdueMoney }}\n              <span>{{scope.row.noPayOverdueMoney == 0?\"(已结清)\":(\"（欠款\"+scope.row.noPayOverdueMoney+\"）\")}}</span>\n            </div>\n            <div v-else>0</div>\n          </template>\n        </avue-crud>\n        <div style=\"margin-top: 5px\">\n          总减免：{{reduction}}\n        </div>\n        <div style=\"margin-top: 0px\">\n          已付款：{{paid}}\n        </div>\n        <div style=\"margin-top: 0px\">\n          总押金：{{firstDeposit>0?firstDeposit:allDeposit}}\n        </div>\n        <div style=\"margin-top: 0px\">\n          剩余押金：{{leaveDeposit}}\n        </div>\n        <div style=\"margin-top: 0px\">\n          欠款：{{allDue==0?0:-1*allDue}}\n        </div>\n        <div style=\"margin-top: 0px\" v-if=\"depositType == 2\">\n          汇总：{{totleMoney}}\n        </div>\n        <div style=\"margin-top: 20px\">\n          客户结算方式（客户选择：<span style=\"color: blue\">买断商品</span>，<span style=\"color: red\">{{depositType ==2?\"押金抵消\":\"退还押金\"}}</span>）\n        </div>\n        <div style=\"margin-top: 10px\" v-if=\"depositType==2\">\n          <span v-if=\"hasPay<0\">需支付金额：<span style=\"color: red;font-size: 20px\">{{ Math.abs(hasPay)}}</span></span>\n          <span v-if=\"hasPay>0\">需退回金额：<span style=\"color: red;font-size: 20px\">{{ Math.abs(hasPay)}}</span></span>\n        </div>\n        <div style=\"margin-top: 10px\" v-else>\n          <span v-if=\"allDue>=0\">需支付：<span style=\"color: red;font-size: 20px\">{{ Math.abs(allDue)}}</span></span>\n          <span v-if=\"leaveDeposit>=0\" style=\"margin-left: 10px;\">需退回押金：<span style=\"color: red;font-size: 20px\">{{ leaveDeposit}}</span></span>\n        </div>\n\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"isShow = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"isOfflineShow = true\" v-if=\"param.status == 8\">线下结算</el-button>\n           <el-button type=\"primary\" @click=\"onlineShow = true\" v-if=\"param.status == 8\">生成在线结算订单</el-button>\n      </span>\n    </el-dialog>\n    <el-dialog\n      v-if=\"isOfflineShow\"\n      v-model=\"form\"\n      title=\"线下结算\"\n      :visible.sync=\"isOfflineShow\"\n      width=\"600px\"\n      @close=\"closeFn\"\n      append-to-body\n      style=\"text-align: left\">\n      <avue-form ref=\"form\" class=\"bill_info\" v-model=\"offlineForm\" :option=\"offline\" @submit=\"submit\" @reset-change=\"cancle\">\n        <template slot-scope=\"{size}\" slot=\"menuForm\">\n          <div slot=\"footer\" class=\"dialog-footer\" style=\"text-align: end;\">\n            <el-button size=\"medium\" @click=\"isOfflineShow = false\">取 消</el-button>\n            <el-button size=\"medium\" type=\"primary\"  @click=\"submit(1)\">确 定</el-button>\n          </div>\n        </template>\n      </avue-form>\n    </el-dialog>\n    <el-dialog title=\"线上结算\" :visible.sync=\"onlineShow\"  style=\"z-index: 9999 !important;\">\n      <div>\n        <div v-if=\"offlineForm.payMoney>0\" style=\"padding-bottom: 10px\">结算需支付金额：<span style=\"color: red;font-size: 20px\">{{offlineForm.payMoney}}</span></div>\n        <div v-if=\"offlineForm.returnMoney>0\">结算退还金额：<span style=\"color: red;font-size: 20px\">{{offlineForm.returnMoney}}</span>(在订单支付成功后原路退回)</div>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"onlineShow = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submit(2)\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\n\n  import {headers} from \"../../util/auth\";\n  import {\n    leaseTypeTitle,\n    buyoutBalancePayment,\n    buyoutPrice,\n    nperNumber,\n    packageName,\n    secondDeposit, indexNumber, calcBuyoutMoney\n  } from \"../../util/order\";\n  import {calculateMoneyStats, floatObj, toFixed} from \"../../constant/goods/constant\";\n  import moment from \"moment\";\n  import vue from \"../../main\";\n  import {cancle, changeBt, settlement} from \"../../api/order/order\";\n  import ElImageViewer from \"element-ui/packages/image/src/image-viewer\";\n\n  export default {\n    name: 'dialog',\n    components: {\n      ElImageViewer,\n    },\n    data () {\n      return {\n        param:null,\n        order:null,\n        destroy:null,\n        isShow:false,\n        imageUrl: '',\n        dialogFormVisible:false,\n        imageslist:[],\n        onlineShow:false,\n        table_key:0,\n        buyoutMoney:0,\n        textarea:'',\n        offlineForm: {payMoney:0,returnMoney:0},\n        isOfflineShow:false,\n        offline:{\n          submitBtn:false,\n          emptyBtn:false,\n          labelWidth: 160,\n          column: [{\n            label:'结算需支付金额',\n            prop:'payMoney',\n            span: 24,\n            type:'title',\n          },{\n            label:'结算退还金额',\n            prop:'returnMoney',\n            span: 24,\n            type:'title',\n          },{\n            label:'上传线下凭证',\n            prop:'images',\n            type: 'upload',\n            span: 24,\n            listType: 'picture-card',\n            tip: '只能上传jpg/png文件，且不超过500kb',\n            propsHttp: {\n              home: vue.$store.state.common.cloudDomain,\n              res: \"data\",\n              url: 'name',\n              name: 'originalName'\n            },\n            action: '/api/blade-resource/oss/endpoint/put-file',\n            rules: [{\n              required: true,\n              message: \"请上传发货图片\",\n              trigger: \"blur\"\n            }]\n          },\n          ]\n        },\n        destroyLists:[],\n        orderBills:[],\n        allDue:0,//总欠款\n        allRent : 0,//总租金\n        reduction : 0,//减免\n        allDeposit : 0,//总押金\n        paid : 0,//已付\n        leaveDeposit:0,//剩余押金\n        totleMoney:0,//汇总\n        firstDeposit : 0,//首次实付押金\n        hasPay:0,//需支付金额\n        destroyInfo: {\n          searchShow: false,\n          searchMenuSpan: 6,\n          tip: false,\n          border: true,\n          editBtn:false,\n          addBtn:false,\n          delBtn:false,\n          index: false,\n          viewBtn: false,\n          selection: false,\n          searchBtn: false,\n          filterBtn: false,\n          refreshBtn: false,\n          columnBtn: false,\n          menu: true,\n          headerAlign: 'center',\n          align: 'center',\n          column: [\n            {\n              label: \"损坏部位\",\n              prop: \"where\",\n              search:true,\n              slot: true,\n              rules: [{\n                required: true,\n                message: \"请输入订单编号\",\n                trigger: \"blur\"\n              }]\n            },\n            {\n              label: \"问题说明\",\n              prop: \"info\",\n              search:true,\n              slot: true,\n              rules: [{\n                required: true,\n                message: \"请输入订单编号\",\n                trigger: \"blur\"\n              }]\n            }\n          ]\n        },\n        option: {\n          searchShow: false,\n          searchMenuSpan: 6,\n          tip: false,\n          border: true,\n          editBtn:false,\n          addBtn:false,\n          delBtn:false,\n          index: false,\n          viewBtn: false,\n          selection: false,\n          searchBtn: false,\n          filterBtn: false,\n          refreshBtn: false,\n          columnBtn: false,\n          menuWidth:100,\n          menu: true,\n          headerAlign: 'center',\n          align: 'center',\n          column: [\n            {\n              label: \"账单类型\",\n              prop: \"typeName\",\n              search:true,\n              slot: true,\n              rules: [{\n                required: true,\n                message: \"请输入订单编号\",\n                trigger: \"blur\"\n              }]\n            },\n            {\n              label: \"应付款日期\",\n              width: 120,\n              prop: \"startTime\",\n            },\n            {\n              label: \"账单金额\",\n              prop: \"money\",\n              slot: true,\n              rules: [{\n                required: true,\n                message: \"请输入商品ID\",\n                trigger: \"blur\"\n              }]\n            },\n            {\n              label: \"付款情况\",\n              prop: \"factPayMoney\",\n              slot: true,\n              width: 140,\n              rules: [{\n                required: true,\n                message: \"请输入商品ID\",\n                trigger: \"blur\"\n              }]\n            },\n            {\n              label: \"滞纳金\",\n              prop: \"allOverdueMoney\",\n              width: 140,\n              slot: true,\n              rules: [{\n                required: true,\n                message: \"请输入租期结束日\",\n                trigger: \"blur\"\n              }]\n            },\n            {\n              label: \"结余/欠款\",\n              width: 140,\n              prop: \"due\",\n              slot: true,\n              props: {\n                label: \"dictValue\",\n                value: \"dictKey\"\n              },\n            },\n          ]\n        },\n      };\n    },\n    watch: {\n      isShow(val, oldVal) {\n        if (!val){\n          this.$nextTick(() => {\n            this.end(true);\n          })\n        }\n      },\n      orderBills:{\n        handler (newVal,old) {\n          this.$nextTick(() => {\n            this.getAllDue()\n          })\n        },\n        deep:true\n      },\n    },\n    created () {\n\n    },\n    activated () { },\n    mounted() {\n      if (this.param.depositType){\n        this.depositType = this.param.depositType;\n      }else{\n        this.depositType = 1;\n      }\n      console.log(\"depositType\",this.depositType)\n      if (this.param.destroyJson){\n        this.destroy = JSON.parse(this.param.destroyJson)\n        console.log(this.destroy)\n      }\n      this.orderBills = [];\n      var index = this.getNperNumber();\n      console.log(\"=======\",index)\n      for (const item of this.param.bills) {\n        item.hasPay = true;\n        item.cancel = false;\n        if (item.status == 1) {\n          item.cancel = true\n        }\n        if (item.type == 5 && Number.parseInt(item.orderNumber) <= 3){\n          item.cancel = false\n        }else if (item.type == 5 && Number.parseInt(item.orderNumber) > 3){\n          item.hasPay = false;\n        }\n        this.orderBills.push({...item})\n      }\n      var buyout = {\n          money:this.buyoutMoney,\n          type: 10,\n          factPayMoney : 0,\n          reductionMoney: 0,\n          couponMoney : 0,\n          hasPay:true,\n          cancel:false,\n          depositMoney : 0,\n          typeName :\"买断价\",\n          startTime: moment().format('YYYY-MM-DD'),\n          endTime:moment().format('YYYY-MM-DD'),\n      }\n        this.orderBills.push(buyout)\n      //计算买断尾款\n\n      // if (this.depositType==2&&this.hasPay<0){\n      //   data.needPay = Math.abs(this.hasPay)\n      // }else if (this.depositType==2&&this.hasPay>0){\n      //   data.needReturn = Math.abs(this.hasPay)\n      // }else if (this.depositType==1){\n      //   data.needPay = this.allDue>=0?this.allDue:0;\n      //   data.needReturn = this.leaveDeposit>=0?this.leaveDeposit:0;\n      // }\n\n      console.log(this.offlineForm)\n    },\n    methods: {\n      goodsInfo(){\n        vue.$router.push({\n          path: \"/goods/view/index\",\n          query: {\n            goodsId : this.param.goodsId,\n          },\n        });\n        this.isShow = false;\n      },\n      getOrderNperNumber(val){\n        if (val.row.type == 5){\n          return \"第\"+val.row.orderNumber+\"期租金\"\n        }else{\n          return val.label;\n        }\n      },\n      /**\n       * 总欠款\n       * @param val\n       * @returns {string|*}\n       */\n      getAllDue(){\n        this.allDue=0;//总欠款\n        this.allRent= 0;//总租金\n        this.reduction= 0;//减免\n        this.allDeposit=0;//总押金\n        this.paid= 0;//已付\n        this.leaveDeposit=0;//剩余押金\n        this.totleMoney=0;//汇总\n        this.firstDeposit = 0;//首次实付押金\n        this.hasPay=0;//需支付金额\n\n        for (const bill of this.orderBills) {\n          if (bill.type == 2&&Number.parseFloat(bill.factPayMoney)>0){//说明是首次押金，并且不是免押\n            this.firstDeposit = floatObj.add(this.firstDeposit,Number.parseFloat(bill.factPayMoney))//\n            continue;\n          }\n          if (bill.type == 3&&Number.parseFloat(bill.factPayMoney)>0){//说明是二次押金\n            this.allDeposit = floatObj.add(this.allDeposit,Number.parseFloat(bill.factPayMoney))\n            this.paid = floatObj.add(this.paid,Number.parseFloat(bill.factPayMoney))\n            continue;\n          }\n          var money = Number.parseFloat(bill.money)-(Number.parseFloat(bill.factPayMoney)+Number.parseFloat(bill.reductionMoney)+Number.parseFloat(bill.couponMoney)+Number.parseFloat(bill.depositMoney))\n          money = toFixed(money,2)\n          if (bill.hasPay){\n            this.allDue = floatObj.add(this.allDue,money);\n          }\n          this.paid = floatObj.add(this.paid,Number.parseFloat(bill.factPayMoney))\n          if(Number.parseFloat(bill.hasOverduePayMoney)>0){\n            this.paid = floatObj.add(this.paid,Number.parseFloat(bill.hasOverduePayMoney))\n          }\n          if (bill.type == 5){\n            this.allRent = floatObj.add(this.allRent,Number.parseFloat(bill.money));\n          }\n          this.reduction = floatObj.add(this.reduction,Number.parseFloat(bill.reductionMoney))\n        }\n\n\n        if (this.firstDeposit>0){\n          this.leaveDeposit = floatObj.subtract(this.firstDeposit,this.paid);\n        }else{\n          this.leaveDeposit = this.allDeposit;\n        }\n        var le = 0;\n        if (this.firstDeposit>0){\n          le = floatObj.subtract(this.firstDeposit,this.paid);\n        }else{\n          le = this.allDeposit;\n        }\n        var all = toFixed(floatObj.subtract(le,this.allDue),2);\n        this.totleMoney = all>0?(all+\"(结余)\"):(all+\"(欠款)\");\n        this.hasPay = all;\n\n        if (this.depositType==2){\n          this.offlineForm.payMoney = 0\n          if(this.hasPay<0){\n            this.offlineForm.payMoney = Math.abs(all)\n          }\n          if(this.hasPay>0){\n            this.offlineForm.returnMoney = this.hasPay\n          }\n        }\n        if (this.depositType==1){\n          this.offlineForm.payMoney = this.allDue\n          this.offlineForm.returnMoney = this.leaveDeposit\n        }\n\n        this.buyoutMoney = calcBuyoutMoney(this.param,this.orderBills);\n\n        for (const bill of this.orderBills) {\n          if (bill.type==10){\n            bill.money = this.buyoutMoney;\n          }\n        }\n      },\n      getDue(bill){\n        var money = Number.parseFloat(bill.money)-(Number.parseFloat(bill.factPayMoney)+Number.parseFloat(bill.reductionMoney)+Number.parseFloat(bill.couponMoney)+Number.parseFloat(bill.depositMoney))\n        money = toFixed(money,2)\n        if (money<0){\n          return \"结余\"+money;\n        }else if (money == 0){\n          return \"结清\"\n        }else{\n          return \"欠款\"+money;\n        }\n      },\n      getLeaseTypeTitle(val){\n        var ss = leaseTypeTitle(val)\n        return ss;\n      },\n      getBuyoutPrice(val){\n        return buyoutPrice(val,this.param.totalPricesRate)\n      },\n      getPackageName(val){\n        return packageName(val);\n      },\n      getNperNumber(){\n        return indexNumber(this.param,this.param.bills);\n      },\n      getNowBuyoutMoney(){\n        return this.getBuyoutPrice(this.param.goodsCombinationJson)-this.getNperNumber()*this.param.rentPerMoney\n      },\n      getBuyoutBalancePayment(){\n        return buyoutBalancePayment(this.param.goodsCombinationJson);\n      },\n      getSecondDeposit(){\n        return secondDeposit(this.param.bills);\n      },\n      headers(){\n        return headers()\n      },\n      closeFn () {\n      },\n      handleAvatarSuccess(res, file) {\n        this.imageUrl = URL.createObjectURL(file.raw);\n      },\n      beforeAvatarUpload(file) {\n        const isJPG = file.type === 'image/jpeg';\n        const isLt2M = file.size / 1024 / 1024 < 2;\n\n        if (!isJPG) {\n          this.$message.error('上传头像图片只能是 JPG 格式!');\n        }\n        if (!isLt2M) {\n          this.$message.error('上传头像图片大小不能超过 2MB!');\n        }\n        return isJPG && isLt2M;\n      },\n      submit(payType){\n        var data = {};\n        data.payType = payType;\n        data.orderId = this.param.id;\n        data.type = 2;\n        data.needPay = 0\n        data.needReturn = 0\n        data.depositType = this.depositType;\n        if (this.depositType==2&&this.hasPay<0){\n          data.needPay = Math.abs(this.hasPay)\n        }else if (this.depositType==2&&this.hasPay>0){\n          data.needReturn = Math.abs(this.hasPay)\n        }else if (this.depositType==1){\n          data.needPay = this.allDue>=0?this.allDue:0;\n          data.needReturn = this.leaveDeposit>=0?this.leaveDeposit:0;\n        }\n\n        data.leaveDeposit = this.leaveDeposit;\n\n        console.log(this.offlineForm.images)\n        if (payType == 1 &&(!this.offlineForm.images||this.offlineForm.images.length == 0)){\n          this.$message.error('请上传线下转账凭证');\n          return;\n        }\n        console.log(this.offlineForm.images)\n        if (this.offlineForm.images&&this.offlineForm.images.length > 0){\n          data.image = this.offlineForm.images.join(\",\")\n        }\n\n        data.bills = this.orderBills;\n\n        console.log(data)\n\n        settlement(data).then(res => {\n          vue.$message({\n            type: 'success',\n            message: '结算成功成功!'\n          });\n          this.isOfflineShow = false;\n          this.onlineShow = false;\n          this.isShow = false\n          this.$nextTick(() => {\n            this.end(true);\n          })\n        }).catch(res => {\n          console.log(res)\n        });\n      }\n    },\n  };\n</script>\n<style scoped>\n  .bottom{\n    padding-bottom: 0px !important;\n    margin-bottom: 0px !important;\n  }\n  :deep .avue-crud__menu {\n    display: none;\n  }\n  :deep .el-empty {\n    padding: 0px 0px !important;\n  }\n  :deep .avue-crud__empty {\n    padding: 0px 0px !important;\n  }\n  :deep .el-empty__image {\n    display: none;\n  }\n  :deep .el-table--small .el-table__cell {\n    padding: 0px 0px !important;\n  }\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;AAwKA,SAAAA,OAAA,IAAAA,QAAA;AACA,SACAC,cAAA,EACAC,oBAAA,EACAC,WAAA,EACAC,UAAA,EACAC,WAAA,EACAC,aAAA,EAAAC,WAAA,EAAAC,eAAA;AAEA,SAAAC,mBAAA,EAAAC,QAAA,EAAAC,OAAA;AACA,OAAAC,MAAA;AACA,OAAAC,GAAA;AACA,SAAAC,MAAA,EAAAC,QAAA,EAAAC,UAAA;AACA,OAAAC,aAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAF,aAAA,EAAAA;EACA;EACAG,IAAA,WAAAA,KAAA;IACA;MACAC,KAAA;MACAC,KAAA;MACAC,OAAA;MACAC,MAAA;MACAC,QAAA;MACAC,iBAAA;MACAC,UAAA;MACAC,UAAA;MACAC,SAAA;MACAC,WAAA;MACAC,QAAA;MACAC,WAAA;QAAAC,QAAA;QAAAC,WAAA;MAAA;MACAC,aAAA;MACAC,OAAA;QACAC,SAAA;QACAC,QAAA;QACAC,UAAA;QACAC,MAAA;UACAC,KAAA;UACAC,IAAA;UACAC,IAAA;UACAC,IAAA;QACA;UACAH,KAAA;UACAC,IAAA;UACAC,IAAA;UACAC,IAAA;QACA;UACAH,KAAA;UACAC,IAAA;UACAE,IAAA;UACAD,IAAA;UACAE,QAAA;UACAC,GAAA;UACAC,SAAA;YACAC,IAAA,EAAAnC,GAAA,CAAAoC,MAAA,CAAAC,KAAA,CAAAC,MAAA,CAAAC,WAAA;YACAC,GAAA;YACAC,GAAA;YACApC,IAAA;UACA;UACAqC,MAAA;UACAC,KAAA;YACAC,QAAA;YACAC,OAAA;YACAC,OAAA;UACA;QACA;MAEA;MACAC,YAAA;MACAC,UAAA;MACAC,MAAA;MAAA;MACAC,OAAA;MAAA;MACAC,SAAA;MAAA;MACAC,UAAA;MAAA;MACAC,IAAA;MAAA;MACAC,YAAA;MAAA;MACAC,UAAA;MAAA;MACAC,YAAA;MAAA;MACAC,MAAA;MAAA;MACAC,WAAA;QACAC,UAAA;QACAC,cAAA;QACA3B,GAAA;QACA4B,MAAA;QACAC,OAAA;QACAC,MAAA;QACAC,MAAA;QACAC,KAAA;QACAC,OAAA;QACAC,SAAA;QACAC,SAAA;QACAC,SAAA;QACAC,UAAA;QACAC,SAAA;QACAC,IAAA;QACAC,WAAA;QACAC,KAAA;QACA/C,MAAA,GACA;UACAC,KAAA;UACAC,IAAA;UACA8C,MAAA;UACAC,IAAA;UACAjC,KAAA;YACAC,QAAA;YACAC,OAAA;YACAC,OAAA;UACA;QACA,GACA;UACAlB,KAAA;UACAC,IAAA;UACA8C,MAAA;UACAC,IAAA;UACAjC,KAAA;YACAC,QAAA;YACAC,OAAA;YACAC,OAAA;UACA;QACA;MAEA;MACA+B,MAAA;QACAlB,UAAA;QACAC,cAAA;QACA3B,GAAA;QACA4B,MAAA;QACAC,OAAA;QACAC,MAAA;QACAC,MAAA;QACAC,KAAA;QACAC,OAAA;QACAC,SAAA;QACAC,SAAA;QACAC,SAAA;QACAC,UAAA;QACAC,SAAA;QACAO,SAAA;QACAN,IAAA;QACAC,WAAA;QACAC,KAAA;QACA/C,MAAA,GACA;UACAC,KAAA;UACAC,IAAA;UACA8C,MAAA;UACAC,IAAA;UACAjC,KAAA;YACAC,QAAA;YACAC,OAAA;YACAC,OAAA;UACA;QACA,GACA;UACAlB,KAAA;UACAmD,KAAA;UACAlD,IAAA;QACA,GACA;UACAD,KAAA;UACAC,IAAA;UACA+C,IAAA;UACAjC,KAAA;YACAC,QAAA;YACAC,OAAA;YACAC,OAAA;UACA;QACA,GACA;UACAlB,KAAA;UACAC,IAAA;UACA+C,IAAA;UACAG,KAAA;UACApC,KAAA;YACAC,QAAA;YACAC,OAAA;YACAC,OAAA;UACA;QACA,GACA;UACAlB,KAAA;UACAC,IAAA;UACAkD,KAAA;UACAH,IAAA;UACAjC,KAAA;YACAC,QAAA;YACAC,OAAA;YACAC,OAAA;UACA;QACA,GACA;UACAlB,KAAA;UACAmD,KAAA;UACAlD,IAAA;UACA+C,IAAA;UACAI,KAAA;YACApD,KAAA;YACAqD,KAAA;UACA;QACA;MAEA;IACA;EACA;EACAC,KAAA;IACAvE,MAAA,WAAAA,OAAAwE,GAAA,EAAAC,MAAA;MAAA,IAAAC,KAAA;MACA,KAAAF,GAAA;QACA,KA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"}]}