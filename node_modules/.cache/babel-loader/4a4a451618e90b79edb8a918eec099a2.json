{"remainingRequest":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workCode\\xiaoE\\大圣系统源码\\admin\\src\\page\\index\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\src\\page\\index\\index.vue","mtime":1666766764000},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\babel.config.js","mtime":1666766764000},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678778409044},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1678778390429},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678778409044},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1678778410194}],"contextDependencies":[],"result":["import { mapGetters } from \"vuex\";\nimport tags from \"./tags\";\nimport top from \"./top/\";\nimport sidebar from \"./sidebar/\";\nimport admin from \"@/util/admin\";\n// import { validatenull } from \"@/util/validate\";\n// import { calcDate } from \"@/util/date.js\";\n// import { getStore } from \"@/util/store.js\";\nexport default {\n  components: {\n    top: top,\n    tags: tags,\n    sidebar: sidebar\n  },\n  name: \"index\",\n  data: function data() {\n    return {\n      //刷新token锁\n      refreshLock: false,\n      //刷新token的时间\n      refreshTime: \"\"\n    };\n  },\n  created: function created() {\n    //实时检测刷新token\n    this.refreshToken();\n  },\n  mounted: function mounted() {\n    this.init();\n  },\n  computed: mapGetters([\"isLock\", \"isCollapse\", \"website\"]),\n  props: [],\n  methods: {\n    showCollapse: function showCollapse() {\n      this.$store.commit(\"SET_COLLAPSE\");\n    },\n    // 屏幕检测\n    init: function init() {\n      var _this = this;\n      this.$store.commit(\"SET_SCREEN\", admin.getScreen());\n      window.onresize = function () {\n        setTimeout(function () {\n          _this.$store.commit(\"SET_SCREEN\", admin.getScreen());\n        }, 0);\n      };\n    },\n    // 10分钟检测一次token\n    refreshToken: function refreshToken() {\n      /*this.refreshTime = setInterval(() => {\r\n        const token = getStore({\r\n          name: \"token\",\r\n          debug: true\r\n        });\r\n        const date = calcDate(token.datetime, new Date().getTime());\r\n        if (validatenull(date)) return;\r\n        if (!(date.seconds >= this.website.tokenTime) && !this.refreshLock) {\r\n          this.refreshLock = true;\r\n          this.$store\r\n            .dispatch(\"RefreshToken\")\r\n            .then(() => {\r\n              this.refreshLock = false;\r\n            })\r\n            .catch(() => {\r\n              this.refreshLock = false;\r\n            });\r\n        }\r\n      }, 10000);*/\n    }\n  }\n};",{"version":3,"names":["mapGetters","tags","top","sidebar","admin","components","name","data","refreshLock","refreshTime","created","refreshToken","mounted","init","computed","props","methods","showCollapse","$store","commit","_this","getScreen","window","onresize","setTimeout"],"sources":["src/page/index/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"avue-contail\"\r\n       :class=\"{'avue--collapse':isCollapse}\">\r\n    <div class=\"avue-header\">\r\n      <!-- 顶部导航栏 -->\r\n      <top />\r\n    </div>\r\n\r\n    <div class=\"avue-layout\">\r\n      <div class=\"avue-left\">\r\n        <!-- 左侧导航栏 -->\r\n        <sidebar />\r\n      </div>\r\n      <div class=\"avue-main\">\r\n        <!-- 顶部标签卡 -->\r\n        <tags />\r\n        <!-- 主体视图层 -->\r\n        <el-scrollbar style=\"height:100%\">\r\n          <keep-alive>\r\n            <router-view class=\"avue-view\"\r\n                         v-if=\"$route.meta.keepAlive\" />\r\n          </keep-alive>\r\n          <router-view class=\"avue-view\"\r\n                       v-if=\"!$route.meta.keepAlive\" />\r\n        </el-scrollbar>\r\n\r\n      </div>\r\n    </div>\r\n    <!-- <el-footer class=\"avue-footer\">\r\n      <img src=\"/svg/logo.svg\"\r\n           alt=\"\"\r\n           class=\"logo\">\r\n      <p class=\"copyright\">© 2018 Avue designed by smallwei</p>\r\n    </el-footer> -->\r\n    <div class=\"avue-shade\"\r\n         @click=\"showCollapse\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport tags from \"./tags\";\r\nimport top from \"./top/\";\r\nimport sidebar from \"./sidebar/\";\r\nimport admin from \"@/util/admin\";\r\n// import { validatenull } from \"@/util/validate\";\r\n// import { calcDate } from \"@/util/date.js\";\r\n// import { getStore } from \"@/util/store.js\";\r\nexport default {\r\n  components: {\r\n    top,\r\n    tags,\r\n    sidebar\r\n  },\r\n  name: \"index\",\r\n  data() {\r\n    return {\r\n      //刷新token锁\r\n      refreshLock: false,\r\n      //刷新token的时间\r\n      refreshTime: \"\"\r\n    };\r\n  },\r\n  created() {\r\n    //实时检测刷新token\r\n    this.refreshToken();\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  computed: mapGetters([\"isLock\", \"isCollapse\", \"website\"]),\r\n  props: [],\r\n  methods: {\r\n    showCollapse() {\r\n      this.$store.commit(\"SET_COLLAPSE\");\r\n    },\r\n    // 屏幕检测\r\n    init() {\r\n      this.$store.commit(\"SET_SCREEN\", admin.getScreen());\r\n      window.onresize = () => {\r\n        setTimeout(() => {\r\n          this.$store.commit(\"SET_SCREEN\", admin.getScreen());\r\n        }, 0);\r\n      };\r\n    },\r\n    // 10分钟检测一次token\r\n    refreshToken() {\r\n      /*this.refreshTime = setInterval(() => {\r\n        const token = getStore({\r\n          name: \"token\",\r\n          debug: true\r\n        });\r\n        const date = calcDate(token.datetime, new Date().getTime());\r\n        if (validatenull(date)) return;\r\n        if (!(date.seconds >= this.website.tokenTime) && !this.refreshLock) {\r\n          this.refreshLock = true;\r\n          this.$store\r\n            .dispatch(\"RefreshToken\")\r\n            .then(() => {\r\n              this.refreshLock = false;\r\n            })\r\n            .catch(() => {\r\n              this.refreshLock = false;\r\n            });\r\n        }\r\n      }, 10000);*/\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"mappings":"AAwCA,SAAAA,UAAA;AACA,OAAAC,IAAA;AACA,OAAAC,GAAA;AACA,OAAAC,OAAA;AACA,OAAAC,KAAA;AACA;AACA;AACA;AACA;EACAC,UAAA;IACAH,GAAA,EAAAA,GAAA;IACAD,IAAA,EAAAA,IAAA;IACAE,OAAA,EAAAA;EACA;EACAG,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACA;MACAC,WAAA;MACA;MACAC,WAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,QAAA,EAAAd,UAAA;EACAe,KAAA;EACAC,OAAA;IACAC,YAAA,WAAAA,aAAA;MACA,KAAAC,MAAA,CAAAC,MAAA;IACA;IACA;IACAN,IAAA,WAAAA,KAAA;MAAA,IAAAO,KAAA;MACA,KAAAF,MAAA,CAAAC,MAAA,eAAAf,KAAA,CAAAiB,SAAA;MACAC,MAAA,CAAAC,QAAA;QACAC,UAAA;UACAJ,KAAA,CAAAF,MAAA,CAAAC,MAAA,eAAAf,KAAA,CAAAiB,SAAA;QACA;MACA;IACA;IACA;IACAV,YAAA,WAAAA,aAAA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAlBA;EAoBA;AACA"}]}