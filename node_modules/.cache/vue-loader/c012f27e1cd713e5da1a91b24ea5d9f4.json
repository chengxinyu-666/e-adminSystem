{"remainingRequest":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workCode\\xiaoE\\大圣系统源码\\admin\\src\\components\\order\\order_button.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\src\\components\\order\\order_button.vue","mtime":1678604836000},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678778409044},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1678778390429},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678778409044},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1678778410194}],"contextDependencies":[],"result":["\n  import {\n    change_bt,\n    changeBt,\n    deduction,\n    dialog_add_collection,\n    order_send_to,\n    order_cancel,\n    order_check_pass,\n    order_check_refuse,\n    order_collection,\n    order_entry_form,\n    order_express,\n    order_first_trial,\n    order_note,\n    order_second_trial,\n    order_set_salesman,\n    order_sms_send,\n    order_buyout,\n    order_update,\n    receive_goods,\n    send_confirmation,\n    shielding_user,\n    order_return,\n    buyout_check,\n    return_check,\n    return_refused,\n    buyout_refused,\n    return_approve,\n    view_voucher, order_receive\n  } from \"./order_dialog\";\n  import {distribute} from \"../../api/audit/orderexamine\";\n  import moment from \"moment\";\n\n  export default {\n    name: \"\",\n    props: {\n      order: Object,\n      type: String,\n    },\n    data () {\n      return{\n        visible:false,\n       fn:{start:this.start,end:this.end}\n      }\n    },\n    mounted() {\n      // console.log(this.order)\n    },\n    methods:{\n      showBt(key){\n        switch (key) {\n            case 'openReturn':{\n                //status_return 归还申请 1 未申请 2 已申请 3 已驳回 4 待发货 5 待收货 6待结算 7 拒收 8 归还成功\n                var statusReturn = this.order.statusReturn;\n                return this.order.status == 8 && (!statusReturn||statusReturn==3||statusReturn==1)?true:false;\n              }\n            case 'openBuyout':{\n                //status_buyout 买断状态 1 未申请 2 已申请 3 已驳回 4 买断通过 5 待结算 6买断成功\n                var statusBuyout = this.order.statusBuyout;\n                return this.order.status == 8 && ( !statusBuyout||statusBuyout==3||statusBuyout==1)?true:false;\n              }\n            case 'openRenewal':\n              var status = this.order.status;\n              return status == 8?true:false;\n              return true;\n            case \"buyout\":{\n              var statusBuyout = this.order.statusBuyout;\n              return this.order.status == 8 &&statusBuyout == 5?true:false;\n            }\n            case \"return\":{\n              var statusReturn = this.order.statusReturn;\n              return this.order.status == 8 &&statusReturn == 6?true:false;\n            }\n        }\n        return false\n      },\n      start(){\n        this.$emit('start')\n      },\n      end(key){\n        console.log(\"--333---\")\n        this.$emit('end',key)\n      },\n      changeBt(order,type,status){\n        var fn = {start:this.start,end:this.end}\n        var params = {};\n        params.id = order.id;\n        params.typeId = type;\n        params.status = status;\n        change_bt({data:params,key:\"changeBt\",fn:fn})\n      },\n      deductMoney(order,type) {\n        var fn = {start:this.start,end:this.end}\n        order.openType = type\n        order.hasBill = false\n        console.log(order)\n        deduction({data:order,key:\"deductMoney\",fn:fn});\n      },\n      /**\n       * 发送推送\n       * @param order\n       */\n      sendSMS(order){\n        var fn = {start:this.start,end:this.end}\n        order_sms_send({data:order,fn:fn})\n      },\n\n      orderBuyout(order){\n        var fn = {start:this.start,end:this.end}\n        order_buyout({data:order,key:\"order_buyout\",fn:fn})\n      },\n\n      orderReturn(order){\n        var fn = {start:this.start,end:this.end}\n        order_return({data:order,fn:fn})\n      },\n      /**\n       * 设置备注\n       * @param order\n       * @param index\n       */\n      note(order){\n        var fn = {start:this.start,end:this.end}\n        order_note({data:order,fn:fn})\n      },\n      /**\n       * 取消\n       * @param order\n       */\n      cancle(order){\n        var fn = {start:this.start,end:this.end}\n        order_cancel({data:order,key:\"cancle\",fn:fn})\n      },\n      /**\n       * 拉黑\n       * @param order\n       */\n      block(order){\n        shielding_user({data:order,fn:this.fn})\n      },\n      /**\n       * 编辑\n       * @param order\n       */\n      edit(order){\n        var order = Object.assign({},order)\n        order.goodsCombinationJson = JSON.parse(order.goodsCombinationJson)\n        var fn = {start:this.start,end:this.end}\n        order_update({data:order,key:\"edit\",fn:fn})\n      },\n      /**\n       * 填写进件单\n       * @param order\n       */\n      entry_Form(order){\n        var fn = {start:this.start,end:this.end}\n        order_entry_form({data:order,key:\"entryForm\",fn:fn})\n      },\n\n      returnApprove(order){\n        var fn = {start:this.start,end:this.end}\n        return_approve({data:order,key:\"return_check\",fn:fn})\n      },\n\n      returnRefused(order){\n        var fn = {start:this.start,end:this.end}\n        return_approve({data:order,key:\"return_refused\",fn:fn})\n      },\n\n      buyoutCheck(order){\n        var fn = {start:this.start,end:this.end}\n        buyout_check({data:order,key:\"buyout_check\",fn:fn})\n      },\n\n      buyoutRefused(order){\n        var fn = {start:this.start,end:this.end}\n        buyout_refused({data:order,key:\"buyout_check\",fn:fn})\n      },\n      /**\n       * 审核拒绝\n       * @param order\n       */\n      refused(order){\n        var fn = {start:this.start,end:this.end}\n        order_check_refuse({data:order,key:\"refused\",fn:fn})\n      },\n      /**\n       * 审核通过\n       * @param order\n       */\n      pass(order){\n        if (order.entryForm.length == 0){\n          this.$message({\n            type: 'error',\n            message: '请填写进件单'\n          });\n          return;\n        }\n        var fn = {start:this.start,end:this.end}\n        order_check_pass({data:order,key:\"pass\",fn:fn})\n      },\n      /**\n       * 查看详情\n       * @param order\n       * @param index\n       */\n      orderView(order){\n        console.log(order)\n        this.$router.push({\n          path: \"/order/view/index\",\n          query: {\n            orderId : order.id,\n          },\n        });\n      },\n      orderCollection(order){\n        const data = {orderIds:order.id}\n        order_collection({data:data,fn:this.fn})\n      },\n      addCollection(order){\n        var fn = {start:this.start,end:this.end}\n        dialog_add_collection({data:order,key:\"addCollection\",fn:fn})\n      },\n      checkFirst(order){\n        const data = {orderIds:order.id,reset:false}\n        order_first_trial({data:data,fn:this.fn})\n      },\n\n      viewVoucher(order){\n        view_voucher({data:order,fn:this.fn})\n      },\n\n\n      resetFirst(order){\n        const data = {orderIds:order.id,reset:true}\n        order_first_trial({data:data,fn:this.fn})\n      },\n\n      /**\n       * 设置二审\n       * @param order\n       */\n      checkSecond(order){\n        const data = {orderIds:order.id,reset:false}\n        order_second_trial({data:data,fn:this.fn})\n      },\n      /**\n       * 二审转交\n       * @param order\n       */\n      resetSecond(order){\n        const data = {orderIds:order.id,reset:true}\n        order_second_trial({data:data,fn:this.fn})\n      },\n\n      /**\n       * 查看物流\n       * @param order\n       */\n      express(order){\n        var fn = {start:this.start,end:this.end}\n        order_express({data:order.id,key:\"orderExpress\",fn:fn})\n      },\n      /**\n       * 设置业务员\n       * @param order\n       */\n      setSalesman(order){\n        order_set_salesman({data:order,fn:this.fn})\n      },\n      /**\n       * 打开续租\n       * @param order\n       */\n      openRenewal(order){\n\n      },\n      /**\n       * 打开归还\n       * @param order\n       */\n      openReturn(order){\n\n      },\n      /**\n       * 打开买断\n       * @param order\n       */\n      openBuyout(order){\n\n      },\n      sendConfirmation(order){\n        const data = {...order}\n        data.orderIds = order.id\n        data.reset = true\n        send_confirmation({data:data,fn:this.fn})\n      },\n      /**\n       * 确认等待签收\n       * @param order\n       * @param order\n       */\n      orderSendTo(order){\n        const data = {id:order.sendId,sendToTime:moment().format('YYYY-MM-DD HH:mm:ss')}\n        order_send_to({data:data,fn:this.fn})\n      },\n      /**\n       * 立即确认收货\n       * @param order\n       */\n      orderReceive(order){\n        console.log(JSON.stringify(order))\n        const data = {orderId:order.id,clientId:order.clientId}\n        order_receive({data:data,fn:this.fn})\n      },\n      receiveGoods(order){\n        const data = {...order}\n        data.orderIds = order.id\n        data.reset = true\n        receive_goods({data:data,fn:this.fn})\n      }\n    }\n  }\n",{"version":3,"sources":["order_button.vue"],"names":[],"mappings":";AA6GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"order_button.vue","sourceRoot":"src/components/order","sourcesContent":["<template>\n  <fragment v-if=\"type == 'orderInfo'\">\n    <el-button type=\"primary\"   @click=\"sendSMS(order)\" size=\"mini\"  v-if=\"order.status < 9\">推送消息</el-button>\n    <el-button type=\"primary\"  @click=\"note(order)\" size=\"mini\">备注信息</el-button>\n    <el-button type=\"danger\"  @click=\"cancle(order)\"  v-if=\"order.status == 1 || order.status == 3 || order.status == 4 || order.status == 5  || order.status == 6\" size=\"mini\">取消订单</el-button>\n<!--    <el-button type=\"danger\"   @click=\"block(order)\" v-if=\"order.status != 7 && order.status != 8\"  size=\"mini\">拉黑用户</el-button>-->\n\n    <el-button type=\"primary\" @click=\"edit(order)\"  v-if=\"order.status == 2 || order.status == 4\" size=\"mini\">修改订单</el-button>\n<!--    <el-button type=\"primary\" @click=\"edit(order)\"  size=\"mini\">修改订单</el-button>-->\n    <el-button type=\"warning\" @click=\"refused(order)\"  v-if=\"order.status == 2\" size=\"mini\">审核拒绝</el-button>\n    <el-button type=\"primary\" @click=\"pass(order)\"  v-if=\"order.status == 2\" size=\"mini\">审核通过</el-button>\n    <el-button type=\"primary\" @click=\"entry_Form(order)\"  v-if=\"order.status == 2\" size=\"mini\">填写进件单</el-button>\n\n    <el-button type=\"primary\" @click=\"returnApprove(order)\"  v-if=\"order.status == 8 && order.statusReturn == 2\" size=\"mini\">归还申请审核</el-button>\n    <el-button type=\"primary\" @click=\"buyoutCheck(order)\"  v-if=\"order.status == 8 && order.statusBuyout == 2\" size=\"mini\">买断申请通过</el-button>\n    <el-button type=\"primary\" @click=\"buyoutRefused(order)\"  v-if=\"order.status == 8 && order.statusBuyout == 2\" size=\"mini\">买断申请拒绝</el-button>\n\n    <el-button type=\"primary\" @click=\"checkFirst(order)\"  v-if=\"order.status == 2 && order.examineFirst == 1\" size=\"mini\">设置一审</el-button>\n    <el-button type=\"primary\" @click=\"resetFirst(order)\"   v-if=\"order.status == 2 &&order.examineFirst == 2\" size=\"mini\">一审转交</el-button>\n    <el-button type=\"primary\" @click=\"checkSecond(order)\"  v-if=\"order.status == 2 && order.examineSecond == 1\" size=\"mini\">设置二审</el-button>\n    <el-button type=\"primary\" @click=\"resetSecond(order)\"  v-if=\"order.status == 2 &&order.examineSecond == 2\" size=\"mini\">二审转交</el-button>\n\n    <el-button type=\"primary\" @click=\"express(order)\"  v-if=\" order.status == 7 || order.status == 8\" size=\"mini\">查看物流</el-button>\n\n    <el-button type=\"warning\" @click=\"orderCollection(order)\"  v-if=\"order.status == 8\" size=\"mini\" >设置催款员</el-button>\n\n    <el-button type=\"primary\" size=\"mini\" v-if=\"showBt('buyout')\" @click=\"orderBuyout(order)\" >买断结算</el-button>\n    <el-button type=\"primary\" size=\"mini\" v-if=\"showBt('return')\" @click=\"orderReturn(order)\"  >归还结算</el-button>\n    <el-button type=\"primary\" size=\"mini\" v-if=\"showBt('openReturn')\" @click=\"changeBt(order,3,order.openReturn==1?0:1)\" >{{order.openReturn == 0?\"打开归还\":\"关闭归还\"}}</el-button>\n    <el-button type=\"primary\" size=\"mini\" v-if=\"showBt('openBuyout')\" @click=\"changeBt(order,2,order.openBuyout==1?0:1)\" >{{order.openBuyout == 0?\"打开买断\":\"关闭买断\"}}</el-button>\n    <el-button type=\"primary\" size=\"mini\" v-if=\"showBt('openRenewal')\" @click=\"changeBt(order,1,order.openRenewal==1?0:1)\" >{{order.openRenewal == 0?\"打开续租\":\"关闭续租\"}}</el-button>\n  </fragment>\n  <fragment v-else-if=\"type == 'orderList'\">\n    <el-button type=\"text\" icon=\"el-icon-view\"  size=\"mini\" @click=\"orderView(order)\" style=\"padding: 2px 0px;\">查看详情</el-button>\n<!--    <el-button type=\"text\" icon=\"el-icon-chat-round\"  size=\"mini\" @click=\"sendSMS(order)\"  v-if=\"false\" style=\"padding: 2px 0px;\">推送消息</el-button>-->\n    <el-button type=\"text\" icon=\"el-icon-tickets\"  size=\"mini\" @click=\"note(order)\" style=\"padding: 2px 0px;\">备注信息</el-button>\n    <el-button type=\"text\" icon=\"el-icon-s-release\"  size=\"mini\" @click=\"cancle(order)\" style=\"padding: 2px 0px;\" v-if=\"order.status == 1 || order.status == 3 || order.status == 4 || order.status == 5\">取消订单</el-button>\n<!--    <el-button type=\"text\" icon=\"el-icon-lock\"  size=\"mini\" @click=\"block(order)\"  v-if=\"order.status < 7\" style=\"padding: 2px 0px;\">拉黑客户</el-button>-->\n\n    <el-button type=\"text\" icon=\"el-icon-edit\"  size=\"mini\" @click=\"edit(order)\" style=\"padding: 2px 0px;\" v-if=\"order.status == 2 || order.status == 4\">修改订单</el-button>\n    <el-button type=\"text\" icon=\"el-icon-view\"  size=\"mini\" @click=\"refused(order)\" style=\"padding: 2px 0px;\" v-if=\"order.status == 2\">审核拒绝</el-button>\n    <el-button type=\"text\" icon=\"el-icon-coordinate\"  size=\"mini\" @click=\"pass(order)\" style=\"padding: 2px 0px;\" v-if=\"order.status == 2\">审核通过</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\"  size=\"mini\" @click=\"checkFirst(order)\" style=\"padding: 2px 0px;\" v-if=\"order.status == 2 && order.examineFirst == 1\">设置一审</el-button>\n    <el-button type=\"text\" icon=\"el-icon-s-check\"  size=\"mini\" @click=\"checkSecond(order)\" style=\"padding: 2px 0px;\" v-if=\"order.status == 2 && order.examineSecond == 1\">设置二审</el-button>\n\n    <el-button type=\"text\" icon=\"el-icon-view\"  size=\"mini\" @click=\"express(order)\" style=\"padding: 2px 0px;\" v-if=\"order.status == 6 || order.status == 7 || order.status == 8\">查看物流</el-button>\n    <el-button type=\"text\" icon=\"el-icon-s-open\"  size=\"mini\" @click=\"openRenewal(order)\" style=\"padding: 2px 0px;\" v-if=\"false\">打开续租</el-button>\n    <el-button type=\"text\" icon=\"el-icon-s-open\"  size=\"mini\" @click=\"openReturn(order)\" style=\"padding: 2px 0px;\" v-if=\"false\">打开归还</el-button>\n    <el-button type=\"text\" icon=\"el-icon-s-open\"  size=\"mini\" @click=\"openBuyout(order)\" style=\"padding: 2px 0px;\" v-if=\"false\">打开买断</el-button>\n    <el-button type=\"text\" icon=\"el-icon-mouse\"  size=\"mini\" @click=\"setSalesman(order)\" style=\"padding: 2px 0px;\" v-if=\"false\">分配业务员</el-button>\n  </fragment>\n  <fragment v-else-if=\"type == 'audit'\"><!-- 待审核 -->\n    <el-button type=\"text\" icon=\"el-icon-view\"  size=\"mini\" @click=\"orderView(order)\" style=\"padding: 2px 0px;\">查看详情</el-button>\n    <el-button type=\"text\" icon=\"el-icon-tickets\"  size=\"mini\" @click=\"note(order)\" style=\"padding: 2px 0px;\">添加备注</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\"  size=\"mini\" @click=\"pass(order)\" style=\"padding: 2px 0px;\" v-if=\"order.status == 2\">审核通过</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\"  size=\"mini\" @click=\"refused(order)\" style=\"padding: 2px 0px;\" v-if=\"order.status == 2\">审核拒绝</el-button>\n  </fragment>\n  <fragment v-else-if=\"type == 'unDistribution'\"><!-- 审核未分配 -->\n    <el-button type=\"text\" icon=\"el-icon-view\"  size=\"mini\" @click=\"orderView(order)\" style=\"padding: 2px 0px;\">查看详情</el-button>\n<!--    <el-button type=\"text\" icon=\"el-icon-tickets\"  size=\"mini\" @click=\"note(order)\" style=\"padding: 2px 0px;\">备注信息</el-button>-->\n<!--    <el-button type=\"text\" icon=\"el-icon-user-solid\"  size=\"mini\" @click=\"checkFirst(order)\" style=\"padding: 2px 0px;\" v-if=\"order.examineFirst == 1\">设置一审</el-button>-->\n<!--    <el-button type=\"text\" icon=\"el-icon-user-solid\"  size=\"mini\" @click=\"resetFirst(order)\" style=\"padding: 2px 0px;\" v-if=\"order.examineFirst == 2\">一审转交</el-button>-->\n<!--    <el-button type=\"text\" icon=\"el-icon-s-check\"  size=\"mini\" @click=\"checkSecond(order)\" style=\"padding: 2px 0px;\" v-if=\"order.examineSecond == 1\">设置二审</el-button>-->\n<!--    <el-button type=\"text\" icon=\"el-icon-s-check\"  size=\"mini\" @click=\"resetSecond(order)\" style=\"padding: 2px 0px;\" v-if=\"order.examineSecond == 2\">二审转交</el-button>-->\n  </fragment>\n  <fragment v-else-if=\"type == 'uncollection'\"><!-- 催款未分配 -->\n    <el-button type=\"text\" icon=\"el-icon-view\"  size=\"mini\" @click=\"orderView(order)\" style=\"padding: 2px 0px;\">查看详情</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\"  size=\"mini\" @click=\"orderCollection(order)\" style=\"padding: 2px 0px;\">设置催款员</el-button>\n  </fragment>\n  <fragment v-else-if=\"type == 'sendgoods'\"><!-- 发货 -->\n    <el-button type=\"text\" icon=\"el-icon-tickets\"  size=\"mini\" @click=\"note(order)\" style=\"padding: 2px 0px;\">备注信息</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\"  size=\"mini\" v-if=\"order.status == 6\" @click=\"sendConfirmation(order)\" style=\"padding: 2px 0px;\" >发货确认</el-button>\n    <el-popover\n      placement=\"left\"\n      width=\"230\"\n      v-if=\"order.status == 7\"\n      v-model=\"visible\">\n      <div><i class=\"el-icon-warning\" style=\"color: #F56C6C\"></i>点击立即签收将马上签收</div>\n      <div><i class=\"el-icon-warning\" style=\"color: #F56C6C\"></i>点击等待签收，24小时内未签收则自动收货</div>\n      <div style=\"text-align: right; margin: 0\">\n        <el-button size=\"mini\" type=\"text\" icon=\"el-icon-close\" @click=\"visible = false\">取消操作</el-button>\n        <el-button type=\"text\" icon=\"el-icon-user-solid\"  size=\"mini\"  @click=\"orderReceive(order)\" style=\"padding: 2px 0px;\" >立即签收</el-button>\n        <el-button type=\"text\" icon=\"el-icon-user-solid\"  size=\"mini\" :disabled=\"order.sendToTime\" @click=\"orderSendTo(order)\" style=\"padding: 2px 0px;\" >等待签收</el-button>\n      </div>\n      <el-button slot=\"reference\"  type=\"text\" icon=\"el-icon-goods\" v-if=\"order.status == 7\"  size=\"mini\"  tyle=\"padding: 2px 0px;\" >签收处理</el-button>\n    </el-popover>\n\n    <el-button type=\"text\" icon=\"el-icon-picture\"  size=\"mini\" v-if=\"[7,8,9].includes(order.status)\" @click=\"viewVoucher(order)\" style=\"padding: 2px 0px;\" >查看凭证</el-button>\n  </fragment>\n  <fragment v-else-if=\"type == 'collection'\"><!-- 催收 -->\n    <el-button type=\"text\" icon=\"el-icon-view\" size=\"mini\" @click=\"orderView(order)\" style=\"padding: 2px 0px;\">查看详情</el-button>\n    <el-button type=\"text\" icon=\"el-icon-tickets\" size=\"mini\" @click=\"note(order)\" style=\"padding: 2px 0px;\">备注信息</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\" size=\"mini\" @click=\"\" style=\"padding: 2px 0px;\" >催款记录</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\" size=\"mini\" @click=\"addCollection(order)\" style=\"padding: 2px 0px;\" >增加催款</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\" size=\"mini\" @click=\"deductMoney(order,'online')\" style=\"padding: 2px 0px;\" >线上扣款</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\" size=\"mini\" @click=\"deductMoney(order,'offline')\" style=\"padding: 2px 0px;\" >线下扣款</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\" size=\"mini\" @click=\"orderBuyout(order)\" v-if=\"order.openBuyout != 0\" style=\"padding: 2px 0px;\" >买断结算</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\" size=\"mini\" @click=\"orderReturn(order)\" v-if=\"order.openReturn != 0\" style=\"padding: 2px 0px;\" >归还结算</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\" size=\"mini\" @click=\"changeBt(order,3,order.openReturn==1?0:1)\" style=\"padding: 2px 0px;\" >{{order.openReturn == 0?\"打开归还\":\"关闭归还\"}}</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\" size=\"mini\" @click=\"changeBt(order,2,order.openBuyout==1?0:1)\" style=\"padding: 2px 0px;\" >{{order.openBuyout == 0?\"打开买断\":\"关闭买断\"}}</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\" size=\"mini\" @click=\"changeBt(order,1,order.openRenewal==1?0:1)\" style=\"padding: 2px 0px;\" >{{order.openRenewal == 0?\"打开续租\":\"关闭续租\"}}</el-button>\n  </fragment>\n  <fragment v-else-if=\"type == 'receivegoods'\"><!-- 收货 -->\n    <el-button type=\"text\" icon=\"el-icon-tickets\"  size=\"mini\" @click=\"note(order)\" style=\"padding: 2px 0px;\">备注信息</el-button>\n    <el-button type=\"text\" icon=\"el-icon-user-solid\" v-if=\"order.receivedStatus == 4\" size=\"mini\" @click=\"receiveGoods(order)\" style=\"padding: 2px 0px;\" >收货处理</el-button>\n  </fragment>\n</template>\n\n<script>\n  import {\n    change_bt,\n    changeBt,\n    deduction,\n    dialog_add_collection,\n    order_send_to,\n    order_cancel,\n    order_check_pass,\n    order_check_refuse,\n    order_collection,\n    order_entry_form,\n    order_express,\n    order_first_trial,\n    order_note,\n    order_second_trial,\n    order_set_salesman,\n    order_sms_send,\n    order_buyout,\n    order_update,\n    receive_goods,\n    send_confirmation,\n    shielding_user,\n    order_return,\n    buyout_check,\n    return_check,\n    return_refused,\n    buyout_refused,\n    return_approve,\n    view_voucher, order_receive\n  } from \"./order_dialog\";\n  import {distribute} from \"../../api/audit/orderexamine\";\n  import moment from \"moment\";\n\n  export default {\n    name: \"\",\n    props: {\n      order: Object,\n      type: String,\n    },\n    data () {\n      return{\n        visible:false,\n       fn:{start:this.start,end:this.end}\n      }\n    },\n    mounted() {\n      // console.log(this.order)\n    },\n    methods:{\n      showBt(key){\n        switch (key) {\n            case 'openReturn':{\n                //status_return 归还申请 1 未申请 2 已申请 3 已驳回 4 待发货 5 待收货 6待结算 7 拒收 8 归还成功\n                var statusReturn = this.order.statusReturn;\n                return this.order.status == 8 && (!statusReturn||statusReturn==3||statusReturn==1)?true:false;\n              }\n            case 'openBuyout':{\n                //status_buyout 买断状态 1 未申请 2 已申请 3 已驳回 4 买断通过 5 待结算 6买断成功\n                var statusBuyout = this.order.statusBuyout;\n                return this.order.status == 8 && ( !statusBuyout||statusBuyout==3||statusBuyout==1)?true:false;\n              }\n            case 'openRenewal':\n              var status = this.order.status;\n              return status == 8?true:false;\n              return true;\n            case \"buyout\":{\n              var statusBuyout = this.order.statusBuyout;\n              return this.order.status == 8 &&statusBuyout == 5?true:false;\n            }\n            case \"return\":{\n              var statusReturn = this.order.statusReturn;\n              return this.order.status == 8 &&statusReturn == 6?true:false;\n            }\n        }\n        return false\n      },\n      start(){\n        this.$emit('start')\n      },\n      end(key){\n        console.log(\"--333---\")\n        this.$emit('end',key)\n      },\n      changeBt(order,type,status){\n        var fn = {start:this.start,end:this.end}\n        var params = {};\n        params.id = order.id;\n        params.typeId = type;\n        params.status = status;\n        change_bt({data:params,key:\"changeBt\",fn:fn})\n      },\n      deductMoney(order,type) {\n        var fn = {start:this.start,end:this.end}\n        order.openType = type\n        order.hasBill = false\n        console.log(order)\n        deduction({data:order,key:\"deductMoney\",fn:fn});\n      },\n      /**\n       * 发送推送\n       * @param order\n       */\n      sendSMS(order){\n        var fn = {start:this.start,end:this.end}\n        order_sms_send({data:order,fn:fn})\n      },\n\n      orderBuyout(order){\n        var fn = {start:this.start,end:this.end}\n        order_buyout({data:order,key:\"order_buyout\",fn:fn})\n      },\n\n      orderReturn(order){\n        var fn = {start:this.start,end:this.end}\n        order_return({data:order,fn:fn})\n      },\n      /**\n       * 设置备注\n       * @param order\n       * @param index\n       */\n      note(order){\n        var fn = {start:this.start,end:this.end}\n        order_note({data:order,fn:fn})\n      },\n      /**\n       * 取消\n       * @param order\n       */\n      cancle(order){\n        var fn = {start:this.start,end:this.end}\n        order_cancel({data:order,key:\"cancle\",fn:fn})\n      },\n      /**\n       * 拉黑\n       * @param order\n       */\n      block(order){\n        shielding_user({data:order,fn:this.fn})\n      },\n      /**\n       * 编辑\n       * @param order\n       */\n      edit(order){\n        var order = Object.assign({},order)\n        order.goodsCombinationJson = JSON.parse(order.goodsCombinationJson)\n        var fn = {start:this.start,end:this.end}\n        order_update({data:order,key:\"edit\",fn:fn})\n      },\n      /**\n       * 填写进件单\n       * @param order\n       */\n      entry_Form(order){\n        var fn = {start:this.start,end:this.end}\n        order_entry_form({data:order,key:\"entryForm\",fn:fn})\n      },\n\n      returnApprove(order){\n        var fn = {start:this.start,end:this.end}\n        return_approve({data:order,key:\"return_check\",fn:fn})\n      },\n\n      returnRefused(order){\n        var fn = {start:this.start,end:this.end}\n        return_approve({data:order,key:\"return_refused\",fn:fn})\n      },\n\n      buyoutCheck(order){\n        var fn = {start:this.start,end:this.end}\n        buyout_check({data:order,key:\"buyout_check\",fn:fn})\n      },\n\n      buyoutRefused(order){\n        var fn = {start:this.start,end:this.end}\n        buyout_refused({data:order,key:\"buyout_check\",fn:fn})\n      },\n      /**\n       * 审核拒绝\n       * @param order\n       */\n      refused(order){\n        var fn = {start:this.start,end:this.end}\n        order_check_refuse({data:order,key:\"refused\",fn:fn})\n      },\n      /**\n       * 审核通过\n       * @param order\n       */\n      pass(order){\n        if (order.entryForm.length == 0){\n          this.$message({\n            type: 'error',\n            message: '请填写进件单'\n          });\n          return;\n        }\n        var fn = {start:this.start,end:this.end}\n        order_check_pass({data:order,key:\"pass\",fn:fn})\n      },\n      /**\n       * 查看详情\n       * @param order\n       * @param index\n       */\n      orderView(order){\n        console.log(order)\n        this.$router.push({\n          path: \"/order/view/index\",\n          query: {\n            orderId : order.id,\n          },\n        });\n      },\n      orderCollection(order){\n        const data = {orderIds:order.id}\n        order_collection({data:data,fn:this.fn})\n      },\n      addCollection(order){\n        var fn = {start:this.start,end:this.end}\n        dialog_add_collection({data:order,key:\"addCollection\",fn:fn})\n      },\n      checkFirst(order){\n        const data = {orderIds:order.id,reset:false}\n        order_first_trial({data:data,fn:this.fn})\n      },\n\n      viewVoucher(order){\n        view_voucher({data:order,fn:this.fn})\n      },\n\n\n      resetFirst(order){\n        const data = {orderIds:order.id,reset:true}\n        order_first_trial({data:data,fn:this.fn})\n      },\n\n      /**\n       * 设置二审\n       * @param order\n       */\n      checkSecond(order){\n        const data = {orderIds:order.id,reset:false}\n        order_second_trial({data:data,fn:this.fn})\n      },\n      /**\n       * 二审转交\n       * @param order\n       */\n      resetSecond(order){\n        const data = {orderIds:order.id,reset:true}\n        order_second_trial({data:data,fn:this.fn})\n      },\n\n      /**\n       * 查看物流\n       * @param order\n       */\n      express(order){\n        var fn = {start:this.start,end:this.end}\n        order_express({data:order.id,key:\"orderExpress\",fn:fn})\n      },\n      /**\n       * 设置业务员\n       * @param order\n       */\n      setSalesman(order){\n        order_set_salesman({data:order,fn:this.fn})\n      },\n      /**\n       * 打开续租\n       * @param order\n       */\n      openRenewal(order){\n\n      },\n      /**\n       * 打开归还\n       * @param order\n       */\n      openReturn(order){\n\n      },\n      /**\n       * 打开买断\n       * @param order\n       */\n      openBuyout(order){\n\n      },\n      sendConfirmation(order){\n        const data = {...order}\n        data.orderIds = order.id\n        data.reset = true\n        send_confirmation({data:data,fn:this.fn})\n      },\n      /**\n       * 确认等待签收\n       * @param order\n       * @param order\n       */\n      orderSendTo(order){\n        const data = {id:order.sendId,sendToTime:moment().format('YYYY-MM-DD HH:mm:ss')}\n        order_send_to({data:data,fn:this.fn})\n      },\n      /**\n       * 立即确认收货\n       * @param order\n       */\n      orderReceive(order){\n        console.log(JSON.stringify(order))\n        const data = {orderId:order.id,clientId:order.clientId}\n        order_receive({data:data,fn:this.fn})\n      },\n      receiveGoods(order){\n        const data = {...order}\n        data.orderIds = order.id\n        data.reset = true\n        receive_goods({data:data,fn:this.fn})\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}