{"remainingRequest":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workCode\\xiaoE\\大圣系统源码\\admin\\src\\components\\order\\dialog_sms_template.vue?vue&type=style&index=0&id=0a157316&lang=scss&scope=true&","dependencies":[{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\src\\components\\order\\dialog_sms_template.vue","mtime":1670176432000},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\css-loader\\index.js","mtime":1678778409149},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1678778410194},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1678778410012},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1678778421276},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678778409044},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1678778410194}],"contextDependencies":[],"result":["\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n",{"version":3,"sources":["dialog_sms_template.vue"],"names":[],"mappings":";AA4KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dialog_sms_template.vue","sourceRoot":"src/components/order","sourcesContent":["<!--\n 发送短信\n -->\n<template>\n  <div>\n    <el-dialog\n      v-if=\"isShow\"\n      title=\"设置二审\"\n      :visible.sync=\"isShow\"\n      width=\"600px\"\n      @close=\"closeFn\"\n      append-to-body\n      style=\"text-align: left\">\n      <el-form ref=\"form1\" label-width=\"120px\" size=\"small\">\n        <el-form-item label=\"短信模板\" prop=\"userNameCn\">\n          <el-select v-model=\"sms.id\" filterable placeholder=\"请选择短信模板\">\n          <el-option\n            v-for=\"item in list\"\n            :key=\"item.tplId\"\n            @click.native =\"change(item)\"\n            :label=\"item.smsType\"\n            :value=\"item.tplId\">\n          </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"模板内容\" prop=\"userNameCn\">\n          <span>{{ sms.content == null?\"请选择发送模板\":sms.content }}</span>\n        </el-form-item>\n        <template v-for=\"item in params\">\n          <el-form-item :label=\"item.key\" prop=\"userNameCn\">\n            <el-input\n              placeholder=\"这里是替换模板的内容\"\n              v-model=\"parameters[item.key]\">\n            </el-input>\n          </el-form-item>\n        </template>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"isShow = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"confirm\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n<script>\n\n  import {headers} from \"../../util/auth\";\n  import {getList,getcanUserList} from \"@/api/parameter/buyunsmstemplate\";\n  import {send} from \"../../api/parameter/buyunsmstemplate\";\n  import {Message} from 'element-ui'\n\n  export default {\n    name: 'dialog',\n    data () {\n      return {\n        param:null,\n        isShow:false,\n        sms: {\n          id:null,\n          content:null,\n        },\n        list:[],\n        parameters: {},\n        options: [{\n          value: '选项1',\n          label: '审核主管'\n        }, {\n          value: '选项2',\n          label: '审核员工'\n        }],\n        users: [{\n          value: '选项1',\n          label: '张三'\n        }, {\n          value: '选项2',\n          label: '李四'\n        }],\n      };\n    },\n    watch: {\n      isShow(val, oldVal) {\n        if (!val){\n          this.$nextTick(() => {\n            this.end();\n          })\n        }\n      }\n    },\n    created () {\n      console.log(this.param)\n      getcanUserList(1, 1000, Object.assign({}, {})).then(res => {\n        this.list= res.data.data;\n      })\n    },\n    activated () { },\n  computed: {\n    params() {\n      var items = [];\n      if (this.sms.content){\n        var regex = /\\#(.+?)\\#/g; // [] 中括号\n        var reasult = this.sms.content.match(regex);\n        for (const item of reasult) {\n          items.push({key:item,value:null})\n        }\n      }\n      return items;\n    }\n  },\n    methods: {\n      headers(){\n        return headers()\n      },\n      change(data){\n        this.sms.content = data.content\n      },\n      closeFn () {\n      },\n      confirm(){\n        const  paras = {clientId:this.param.clientId,orderId:this.param.id};\n        Object.assign(paras,this.parameters)\n        paras.id = this.sms.id;\n        send(paras).then(res => {\n          console.log(res.data.data)\n          this.$message(\"发送成功\")\n          this.isShow = false\n        })\n        console.log(paras)\n      },\n      handleAvatarSuccess(res, file) {\n        this.imageUrl = URL.createObjectURL(file.raw);\n      },\n      beforeAvatarUpload(file) {\n        const isJPG = file.type === 'image/jpeg';\n        const isLt2M = file.size / 1024 / 1024 < 2;\n\n        if (!isJPG) {\n          this.$message.error('上传头像图片只能是 JPG 格式!');\n        }\n        if (!isLt2M) {\n          this.$message.error('上传头像图片大小不能超过 2MB!');\n        }\n        return isJPG && isLt2M;\n      }\n    },\n  };\n</script>\n<style lang=\"scss\" scope>\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n  }\n</style>\n"]}]}