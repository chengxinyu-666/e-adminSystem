{"remainingRequest":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workCode\\xiaoE\\大圣系统源码\\admin\\src\\components\\order\\dialog_order_update.vue?vue&type=template&id=76ad0c50&scoped=true&","dependencies":[{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\src\\components\\order\\dialog_order_update.vue","mtime":1677217084000},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678778409044},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678778409044},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1678778390429},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":1678778410194},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678778409044},{"path":"D:\\workCode\\xiaoE\\大圣系统源码\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1678778410194}],"contextDependencies":[],"result":["\n<div style=\"height: 100%;\">\n  <el-dialog\n    v-if=\"isShow\"\n    v-model=\"form\"\n    title=\"订单修改\"\n    :visible.sync=\"isShow\"\n    width=\"800px\"\n    @close=\"closeFn\"\n    append-to-body\n    style=\"text-align: left\">\n    <div style=\"width: 100%;min-height:300px;height: 100%;position: relative;\">\n      <div v-loading=\"loading\"  element-loading-text=\"拼命加载中\" style=\"height:100%;width:100%;z-index: 100;position: absolute\" v-if=\"loading\"></div>\n      <div style=\"height: 100%\">\n        <div style=\"width: 100%;text-align: center;margin-bottom: 10px\" v-if=\"!matching\">\n          <el-alert\n            :closable=\"false\"\n            title=\"该商品规格尺寸已改变，请重新选择规格尺寸\"\n            type=\"warning\">\n          </el-alert>\n        </div>\n        <avue-form ref=\"form\" class=\"bill_info\" v-model=\"form\" :option=\"option\" @submit=\"submit\" @reset-change=\"cancle\">\n          <template slot-scope=\"{disabled,size}\" slot=\"fistBill\">\n            <div style=\"width: 100%\">\n              <div class=\"bills myscollbar\" ref=\"scoll\">\n                <template v-for=\"(bill,index) in form.bills\">\n                  <div style=\"display: inline-flex;margin-bottom: 5px\">\n                    <div style=\"display: inline-flex;background-color: #eeeeee80;border-radius: 5px;padding: 0px 5px;flex: 1;justify-content: space-between\">\n                      <div style=\"margin-left: 10px\">\n                        <span style=\"width: 120px;text-align: right\">{{ billTypeName(bill) }}：</span>\n                        <span>\n                          {{ bill.money }}\n                          <span v-if=\"bill.status == 2 || bill.status == 3\">（已付：{{bill.factPayMoney}}）</span>\n                          <span v-if=\"bill.status == 2 || bill.status == 3\" style=\"font-size: 14px;\" >（已减免：{{bill.reductionMoney}}）</span>\n                          <span style=\"font-size: 14px;\" v-if=\"bill.couponMoney&&bill.couponMoney!=0\">（优惠券：{{bill.couponMoney}}）</span>\n                        </span>\n                      </div>\n                      <el-checkbox v-model=\"bill.first\" @change=\"sort\" :disabled=\"bill.status == 2 || bill.status == 3\">首次支付</el-checkbox>\n                    </div>\n                    <div style=\"margin-left: 10px;width: 20px;cursor: pointer\">\n                      <template v-if=\"bill.type != 5 && bill.status == 1 \">\n                        <el-popconfirm\n                          title=\"确认删除该账单吗？\"\n                          @confirm='deleteBill(index)'>\n                          <i class=\"el-icon-delete\"  slot=\"reference\" ></i>\n                        </el-popconfirm>\n                      </template>\n                      <i class=\"el-icon-edit-outline\"  @click=\"editBill(index)\" v-if=\"bill.type == 5 && form.lease == 12 && enable('custom_rent')\"></i>\n                    </div>\n                  </div>\n                </template>\n              </div>\n              <div style=\"display: inline-flex;width: 100%\">\n                <div style=\"border-radius: 5px;padding: 0px 5px;flex: 1;border: 1px solid #eeeeee;text-align: center;cursor: pointer;margin-top: 5px\" v-if=\"form.lease\" @click=\"addBill\">\n                  添加收费项\n                </div>\n                <span v-else style=\"font-size: 13px;color: red\">\n                暂无账单，请完整选择商品，规格，套餐，租期\n              </span>\n\n              </div>\n            </div>\n          </template>\n\n          <template slot-scope=\"{disabled,size}\" slot=\"rentMoney\">\n            <div style=\"width: 100%;display: inline-flex\">\n              <el-descriptions class=\"margin-top\"  :column=\"4\" style=\"flex: 1\" border size=\"mini\">\n                <el-descriptions-item label-class-name=\"title-class\" >\n                  <template slot=\"label\">\n                    {{ form.lease }}期租金\n                  </template>\n                  {{allRentBillMoney}}\n                </el-descriptions-item>\n                <el-descriptions-item label-class-name=\"title-class\" >\n                  <template slot=\"label\">\n                    已分配\n                  </template>\n                  {{rentBillMoney}}\n                </el-descriptions-item>\n                <el-descriptions-item label-class-name=\"title-class\" >\n                  <template slot=\"label\">\n                    可分配\n                  </template>\n                  <div style=\"color: #dd6161\">{{enDistribution}}</div>\n                </el-descriptions-item>\n                <el-descriptions-item label-class-name=\"title-class\" >\n                  <template slot=\"label\">\n                    授信额度\n                  </template>\n                  <div style=\"color: #dd6161\">{{param.amount}}</div>\n                </el-descriptions-item>\n              </el-descriptions>\n              <div style=\"display: inline-flex;margin-left: 5px\" v-if=\"enable('custom_rent')\">\n                <el-button size=\"mini\" @click=\"resetBill\">重置</el-button>\n                <el-tooltip class=\"item\" effect=\"dark\" placement=\"top-start\">\n                  <div slot=\"content\">前6期是（合约价 * 0.838 / 6）<br/>后6期就是（合约价 - 前面6个月的总价）/6</div>\n                  <el-button size=\"mini\" style=\"margin-left: 5px\" @click=\"autoBill\">自动</el-button>\n                </el-tooltip>\n              </div>\n            </div>\n          </template>\n\n          <template slot-scope=\"{disabled,size}\" slot=\"goodsPrice\">\n            <el-descriptions class=\"margin-top\"  :column=\"5\" border size=\"mini\">\n              <el-descriptions-item label-class-name=\"title-class\" >\n                <template slot=\"label\">\n                  官网价\n                </template>\n                {{goodsCombination?goodsCombination.websitePrice:\"\"}}\n              </el-descriptions-item>\n              <el-descriptions-item label-class-name=\"title-class\" >\n                <template slot=\"label\">\n                  合约价\n                </template>\n                {{contractPrice}}\n              </el-descriptions-item>\n              <el-descriptions-item label-class-name=\"title-class\" >\n                <template slot=\"label\">\n                  租金系数\n                </template>\n                {{goodsCombination?goodsCombination.rentRate:\"\"}}\n              </el-descriptions-item>\n              <el-descriptions-item label-class-name=\"title-class\" >\n                <template slot=\"label\">\n                  每期租金\n                </template>\n                {{goodsCombination?goodsCombination.rentPerMoney:\"\"}}\n              </el-descriptions-item>\n              <el-descriptions-item label-class-name=\"title-class\" >\n                <template slot=\"label\">\n                  买断价\n                  <el-tooltip class=\"item\" effect=\"dark\" placement=\"left\">\n                    <div slot=\"content\">买断价：<br/>\n                      增长幅度公式： A = （总价系数 - 1.255）/ 3<br/>\n                      第4个月系数：1.25 + A<br/>\n                      第5个月系数：1.25 + A * 2<br/>\n                      第6个月系数：1.25 + A * 3<br/>\n                      后面6到12个月买断系数都和第6个月一样</div>\n                    <i class=\"el-icon-warning-outline\" style=\"color: #dd6161\"></i>\n                  </el-tooltip>\n                </template>\n                {{buyoutMoney}}\n              </el-descriptions-item>\n            </el-descriptions>\n          </template>\n          <template slot-scope=\"{disabled,size}\" slot=\"combinations\">\n            <el-select v-model=\"goodsCombinationTitle\" placeholder=\"请选择规格尺寸\" size=\"mini\">\n              <el-option\n                v-for=\"(item, index) in combinationsJsonTitles\"\n                :key=\"index\"\n                @click.native =\"changeCombinations(item)\"\n                :label=\"item\"\n                :value=\"item\">\n              </el-option>\n            </el-select>\n          </template>\n          <template slot-scope=\"{disabled,size}\" slot=\"packageType\">\n            <el-select v-model=\"packageNameTitle\" placeholder=\"请选择租赁方案\" size=\"mini\">\n              <el-option\n                v-for=\"(item, index) in goodsCombinations\"\n                :key=\"index\"\n                @click.native =\"changePackage(item)\"\n                :label=\"item\"\n                :value=\"item\">\n              </el-option>\n            </el-select>\n          </template>\n\n          <template slot-scope=\"{disabled,size}\" slot=\"lease\">\n            <el-select v-model=\"form.lease\" placeholder=\"请选择期数\" size=\"mini\">\n              <el-option\n                v-for=\"(item, index) in leases\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </template>\n          <template slot-scope=\"{disabled,size}\" slot=\"fistBillCount\">\n            <span style=\"font-weight: bold;font-size: 20px;\">{{toFixed(form.firstMoney)}}</span>\n          </template>\n\n          <template slot-scope=\"{disabled,size}\" slot=\"billCount\">\n            <span style=\"font-weight: bold;font-size: 20px;\">{{toFixed(form.realMoney)}}</span>\n            <span v-if=\"param.amount-form.realMoney>=0\">\n              (距离支付宝预授权额度：<span>{{param.amount}}的90%({{toFixed(parseFloat(param.amount)*0.9,2)}}\n                  <el-tooltip class=\"item\" effect=\"dark\" content=\"账单总金额不能超过支付宝授信额度的90%\" placement=\"top-start\">\n                        <i class=\"el-icon-warning-outline\" style=\"color: #dd6161\"></i>\n                  </el-tooltip>\n              )</span>，还有<span>{{toFixed(parseFloat(param.amount)*0.9-form.realMoney,2)}}</span>扣费额度)\n            </span>\n            <span v-else style=\"color: #dd6161\">\n               (超过支付宝预授权额度：<span>{{param.amount}}的80%({{parseFloat(param.amount)*0.9}}\n                <el-tooltip class=\"item\" effect=\"dark\" content=\"账单总金额不能超过支付宝授信额度的90%\" placement=\"top-start\">\n                        <i class=\"el-icon-warning-outline\" style=\"color: #dd6161\"></i>\n                  </el-tooltip>\n              )</span>，超出金额为<span>{{parseFloat(param.amount)*0.9-form.realMoney}}</span>)\n            </span>\n          </template>\n\n          <template slot-scope=\"{disabled,size}\" slot=\"payCount\">\n            <span style=\"font-weight: bold;font-size: 20px;color: #67c23a\">{{toFixed(form.factPayMoney)}}<span v-if=\"form.reductionMoney && form.reductionMoney >0\" style=\"font-size: 14px;\">(实付<span>{{form.realPay}}</span><span style=\"color: #dd6161;margin-left: 4px\">减免{{form.reductionMoney}}</span>)</span></span>\n          </template>\n\n          <template slot-scope=\"{disabled,size}\" slot=\"noPay\">\n            <span style=\"font-weight: bold;font-size: 20px;color: red\">{{calcNoPay()}}</span>\n          </template>\n          <template slot-scope=\"{size}\" slot=\"menuForm\">\n            <div slot=\"footer\" class=\"dialog-footer\" style=\"text-align: end;\">\n              <el-button size=\"medium\" @click=\"$refs.form.resetForm()\">取 消</el-button>\n              <el-button size=\"medium\" type=\"primary\"  @click=\"$refs.form.submit()\">确 定</el-button>\n            </div>\n          </template>\n        </avue-form>\n      </div>\n    </div>\n  </el-dialog>\n  <el-dialog\n    title=\"选择账单\"\n    :close-on-click-modal=\"false\"\n    :visible.sync=\"dialogVisible\"\n    width=\"30%\">\n    <div>\n      <div style=\"display: flex\">\n        <span>账单类型：</span>\n        <el-select v-model=\"addItem.typeName\" style=\"flex: 1\" size=\"mini\" placeholder=\"请选择\">\n          <el-option\n            @click.native =\"selectItem(item)\"\n            v-for=\"item in billOptions\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.label\">\n          </el-option>\n        </el-select>\n      </div>\n      <div style=\"display: flex;margin-top: 10px\">\n        <span>账单金额：</span>\n        <el-input v-model=\"addItem.money\" size=\"mini\" style=\"flex: 1\" placeholder=\"请输入内容\"></el-input>\n      </div>\n    </div>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"dialogVisible = false\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"addItemConfirm\">确 定</el-button>\n    </span>\n  </el-dialog>\n\n  <el-dialog\n    title=\"编辑账单\"\n    :close-on-click-modal=\"false\"\n    :visible.sync=\"editItemVisible\"\n    width=\"30%\">\n    <div>\n      <div style=\"display: flex\">\n        <span>可增加金额：</span>\n        <span>{{enItemDistribution()}}</span>\n      </div>\n      <div style=\"display: flex;margin-top: 10px\">\n        <span>账单金额：</span>\n        <el-input v-model=\"editItem.newMoney\" size=\"mini\" style=\"flex: 1\" placeholder=\"请输入内容\"></el-input>\n      </div>\n      <div> <span></span></div>\n    </div>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"editItemVisible = false\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"editItemConfirm\">确 定</el-button>\n    </span>\n  </el-dialog>\n</div>\n",null]}